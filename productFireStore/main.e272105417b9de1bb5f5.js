(self.webpackChunkproduct_fire_store=self.webpackChunkproduct_fire_store||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},25:(t,e,n)=>{"use strict";n.d(e,{AFp:()=>pa,ip1:()=>fa,CZH:()=>da,hGG:()=>au,z2F:()=>nu,sBO:()=>Ms,_Vd:()=>cs,EJc:()=>Ea,SBq:()=>ds,qLn:()=>fr,vpe:()=>la,gxx:()=>Hi,OlP:()=>tn,zs3:()=>oo,ZZ4:()=>Ns,aQg:()=>Rs,soG:()=>_a,h0i:()=>Zs,PXZ:()=>$a,R0b:()=>Ra,FiY:()=>bn,Lbi:()=>va,g9A:()=>ga,Qsj:()=>ys,FYo:()=>ps,JOm:()=>yr,Tiy:()=>gs,q3G:()=>sr,Rgc:()=>Gs,dDg:()=>Ua,q4F:()=>bs,GfV:()=>vs,s_b:()=>Qs,ifc:()=>B,eFA:()=>Ya,G48:()=>Qa,Gpc:()=>w,X6Q:()=>Ja,_c5:()=>ou,VLi:()=>Ga,c2e:()=>wa,zSh:()=>Ki,wAp:()=>Qo,vHH:()=>T,EiD:()=>ir,mCW:()=>qn,qzn:()=>Dn,JVY:()=>On,pB0:()=>Ln,eBb:()=>Pn,L6k:()=>Rn,LAX:()=>Vn,cg1:()=>Ko,Tjo:()=>iu,kL8:()=>Zo,yhl:()=>Nn,dqk:()=>Z,sIi:()=>yo,CqO:()=>ko,QGY:()=>Ao,F4k:()=>xo,RDi:()=>Nt,AaK:()=>g,z3N:()=>kn,qOj:()=>ao,TTD:()=>St,_Bn:()=>ss,xp6:()=>Yr,uIk:()=>vo,ekj:()=>Lo,Xpm:()=>it,lG2:()=>ht,Yz7:()=>A,cJS:()=>x,oAB:()=>ut,Yjl:()=>ft,Y36:()=>wo,_UZ:()=>So,qZA:()=>Io,TgZ:()=>To,EpF:()=>Co,n5z:()=>Qe,LFG:()=>yn,$8M:()=>$e,NdJ:()=>Do,oxw:()=>Ro,Q6J:()=>_o,CHM:()=>Zt,kYT:()=>ct,YNc:()=>bo,W1O:()=>ha,_uU:()=>qo,hij:()=>Bo});var r=n(5959),i=n(7570),o=n(8318),s=n(1906),a=n(6673);function u(){return function(t){return t.lift(new c(t))}}class c{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new l(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class l extends a.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class h extends o.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i.w,t.add(this.source.subscribe(new d(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.w.EMPTY)),t}refCount(){return u()(this)}}const f=(()=>{const t=h.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class d extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function p(){return new r.xQ}function y(t){for(let e in t)if(t[e]===y)return e;throw Error("Could not find renamed property on target object.")}function m(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function g(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(g).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function v(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const b=y({__forward_ref__:y});function w(t){return t.__forward_ref__=w,t.toString=function(){return g(this())},t}function _(t){return E(t)?t():t}function E(t){return"function"==typeof t&&t.hasOwnProperty(b)&&t.__forward_ref__===w}class T extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function I(t){return"string"==typeof t?t:null==t?"":String(t)}function S(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():I(t)}function C(t,e){const n=e?` in ${e}`:"";throw new T("201",`No provider for ${S(t)} found${n}`)}function A(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function x(t){return{providers:t.providers||[],imports:t.imports||[]}}function k(t){return D(t,O)||D(t,P)}function D(t,e){return t.hasOwnProperty(e)?t[e]:null}function N(t){return t&&(t.hasOwnProperty(R)||t.hasOwnProperty(V))?t[R]:null}const O=y({"\u0275prov":y}),R=y({"\u0275inj":y}),P=y({ngInjectableDef:y}),V=y({ngInjectorDef:y});var L=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let F;function M(t){const e=F;return F=t,e}function j(t,e,n){const r=k(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&L.Optional?null:void 0!==e?e:void C(g(t),"Injector")}function U(t){return{toString:t}.toString()}var q=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),B=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const G="undefined"!=typeof globalThis&&globalThis,H="undefined"!=typeof window&&window,z="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,K="undefined"!=typeof global&&global,Z=G||K||H||z,J={},Q=[],W=y({"\u0275cmp":y}),$=y({"\u0275dir":y}),Y=y({"\u0275pipe":y}),X=y({"\u0275mod":y}),tt=y({"\u0275loc":y}),et=y({"\u0275fac":y}),nt=y({__NG_ELEMENT_ID__:y});let rt=0;function it(t){return U(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===q.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Q,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||B.Emulated,id:"c",styles:t.styles||Q,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=rt++,n.inputs=lt(t.inputs,e),n.outputs=lt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(ot):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(st):null,n})}function ot(t){return dt(t)||function(t){return t[$]||null}(t)}function st(t){return function(t){return t[Y]||null}(t)}const at={};function ut(t){return U(()=>{const e={type:t.type,bootstrap:t.bootstrap||Q,declarations:t.declarations||Q,imports:t.imports||Q,exports:t.exports||Q,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(at[t.id]=t.type),e})}function ct(t,e){return U(()=>{const n=pt(t,!0);n.declarations=e.declarations||Q,n.imports=e.imports||Q,n.exports=e.exports||Q})}function lt(t,e){if(null==t)return J;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ht=it;function ft(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function dt(t){return t[W]||null}function pt(t,e){const n=t[X]||null;if(!n&&!0===e)throw new Error(`Type ${g(t)} does not have '\u0275mod' property.`);return n}const yt=20,mt=10;function gt(t){return Array.isArray(t)&&"object"==typeof t[1]}function vt(t){return Array.isArray(t)&&!0===t[1]}function bt(t){return 0!=(8&t.flags)}function wt(t){return 2==(2&t.flags)}function _t(t){return 1==(1&t.flags)}function Et(t){return null!==t.template}function Tt(t,e){return t.hasOwnProperty(et)?t[et]:null}class It{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function St(){return Ct}function Ct(t){return t.type.prototype.ngOnChanges&&(t.setInput=xt),At}function At(){const t=kt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===J)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function xt(t,e,n,r){const i=kt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:J,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new It(u&&u.currentValue,e,s===J),t[r]=e}function kt(t){return t.__ngSimpleChanges__||null}let Dt;function Nt(t){Dt=t}function Ot(t){return!!t.listen}St.ngInherit=!0;const Rt={createRenderer:(t,e)=>void 0!==Dt?Dt:"undefined"!=typeof document?document:void 0};function Pt(t){for(;Array.isArray(t);)t=t[0];return t}function Vt(t,e){return Pt(e[t])}function Lt(t,e){return Pt(e[t.index])}function Ft(t,e){return t.data[e]}function Mt(t,e){const n=e[t];return gt(n)?n:n[0]}function jt(t){return 128==(128&t[2])}function Ut(t,e){return null==e?null:t[e]}function qt(t){t[18]=0}function Bt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Gt={lFrame:ue(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ht(){return Gt.bindingsEnabled}function zt(){return Gt.lFrame.lView}function Kt(){return Gt.lFrame.tView}function Zt(t){return Gt.lFrame.contextLView=t,t[8]}function Jt(){let t=Qt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Qt(){return Gt.lFrame.currentTNode}function Wt(t,e){const n=Gt.lFrame;n.currentTNode=t,n.isParent=e}function $t(){return Gt.lFrame.isParent}function Yt(){return Gt.isInCheckNoChangesMode}function Xt(t){Gt.isInCheckNoChangesMode=t}function te(){return Gt.lFrame.bindingIndex++}function ee(t,e){const n=Gt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ne(e)}function ne(t){Gt.lFrame.currentDirectiveIndex=t}function re(t){Gt.lFrame.currentQueryIndex=t}function ie(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function oe(t,e,n){if(n&L.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&L.Host||(r=ie(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Gt.lFrame=ae();return r.currentTNode=e,r.lView=t,!0}function se(t){const e=ae(),n=t[1];Gt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ae(){const t=Gt.lFrame,e=null===t?null:t.child;return null===e?ue(t):e}function ue(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ce(){const t=Gt.lFrame;return Gt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const le=ce;function he(){const t=ce();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fe(){return Gt.lFrame.selectedIndex}function de(t){Gt.lFrame.selectedIndex=t}function pe(){const t=Gt.lFrame;return Ft(t.tView,t.selectedIndex)}function ye(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function me(t,e,n){be(t,e,3,n)}function ge(t,e,n,r){(3&t[2])===n&&be(t,e,n,r)}function ve(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function be(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(we(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function we(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const _e=-1;class Ee{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Te(t,e,n){const r=Ot(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Se(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Ie(t){return 3===t||4===t||6===t}function Se(t){return 64===t.charCodeAt(0)}function Ce(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ae(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ae(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function xe(t){return t!==_e}function ke(t){return 32767&t}function De(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ne=!0;function Oe(t){const e=Ne;return Ne=t,e}let Re=0;function Pe(t,e){const n=Le(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ve(r.data,t),Ve(e,null),Ve(r.blueprint,null));const i=Fe(t,e),o=t.injectorIndex;if(xe(i)){const t=ke(i),n=De(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ve(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Le(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Fe(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return _e;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return _e}function Me(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(nt)&&(r=n[nt]),null==r&&(r=n[nt]=Re++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function je(t,e,n){if(n&L.Optional)return t;C(e,"NodeInjector")}function Ue(t,e,n,r){if(n&L.Optional&&void 0===r&&(r=null),0==(n&(L.Self|L.Host))){const i=t[9],o=M(void 0);try{return i?i.get(e,r,n&L.Optional):j(e,r,n&L.Optional)}finally{M(o)}}return je(r,e,n)}function qe(t,e,n,r=L.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(nt)?t[nt]:void 0;return"number"==typeof e?e>=0?255&e:Ge:e}(n);if("function"==typeof o){if(!oe(e,t,r))return r&L.Host?je(i,n,r):Ue(e,n,r,i);try{const t=o(r);if(null!=t||r&L.Optional)return t;C(n)}finally{le()}}else if("number"==typeof o){let i=null,s=Le(t,e),a=_e,u=r&L.Host?e[16][6]:null;for((-1===s||r&L.SkipSelf)&&(a=-1===s?Fe(t,e):e[s+8],a!==_e&&Ze(r,!1)?(i=e[1],s=ke(a),e=De(a,e)):s=-1);-1!==s;){const t=e[1];if(Ke(o,s,t.data)){const t=He(s,e,n,i,r,u);if(t!==Be)return t}a=e[s+8],a!==_e&&Ze(r,e[1].data[s+8]===u)&&Ke(o,s,e)?(i=t,s=ke(a),e=De(a,e)):s=-1}}}return Ue(e,n,r,i)}const Be={};function Ge(){return new Je(Jt(),zt())}function He(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Et(t)&&t.type===n)return u}return null}(a,s,n,null==r?wt(a)&&Ne:r!=s&&0!=(3&a.type),i&L.Host&&o===a);return null!==u?ze(e,s,u,a):Be}function ze(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ee){const s=i;s.resolving&&function(t,e){throw new T("200",`Circular dependency in DI detected for ${t}`)}(S(o[n]));const a=Oe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?M(s.injectImpl):null;oe(t,r,L.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ct(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&M(u),Oe(a),s.resolving=!1,le()}}return i}function Ke(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ze(t,e){return!(t&L.Self||t&L.Host&&e)}class Je{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return qe(this._tNode,this._lView,t,void 0,e)}}function Qe(t){return U(()=>{const e=t.prototype.constructor,n=e[et]||We(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[et]||We(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function We(t){return E(t)?()=>{const e=We(_(t));return e&&e()}:Tt(t)}function $e(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Ie(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Jt(),t)}const Ye="__parameters__";function Xe(t,e,n){return U(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ye)?t[Ye]:Object.defineProperty(t,Ye,{value:[]})[Ye];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class tn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=A({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}function en(t,e){t.forEach(t=>Array.isArray(t)?en(t,e):e(t))}function nn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function on(t,e,n){let r=an(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function sn(t,e){const n=an(t,e);if(n>=0)return t[1|n]}function an(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const un={},cn=/\n/gm,ln="__source",hn=y({provide:String,useValue:y});let fn;function dn(t){const e=fn;return fn=t,e}function pn(t,e=L.Default){if(void 0===fn)throw new Error("inject() must be called from an injection context");return null===fn?j(t,void 0,e):fn.get(t,e&L.Optional?null:void 0,e)}function yn(t,e=L.Default){return(F||pn)(_(t),e)}function mn(t){const e=[];for(let n=0;n<t.length;n++){const r=_(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=L.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(yn(t,n))}else e.push(yn(r))}return e}function gn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const vn=gn(Xe("Inject",t=>({token:t})),-1),bn=gn(Xe("Optional"),8),wn=gn(Xe("SkipSelf"),4);let _n;function En(t){var e;return(null===(e=function(){if(void 0===_n&&(_n=null,Z.trustedTypes))try{_n=Z.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return _n}())||void 0===e?void 0:e.createHTML(t))||t}class Tn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class In extends Tn{getTypeName(){return"HTML"}}class Sn extends Tn{getTypeName(){return"Style"}}class Cn extends Tn{getTypeName(){return"Script"}}class An extends Tn{getTypeName(){return"URL"}}class xn extends Tn{getTypeName(){return"ResourceURL"}}function kn(t){return t instanceof Tn?t.changingThisBreaksApplicationSecurity:t}function Dn(t,e){const n=Nn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Nn(t){return t instanceof Tn&&t.getTypeName()||null}function On(t){return new In(t)}function Rn(t){return new Sn(t)}function Pn(t){return new Cn(t)}function Vn(t){return new An(t)}function Ln(t){return new xn(t)}class Fn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(En(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Mn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=En(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=En(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const jn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Un=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function qn(t){return(t=String(t)).match(jn)||t.match(Un)?t:"unsafe:"+t}function Bn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Gn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Hn=Bn("area,br,col,hr,img,wbr"),zn=Bn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Kn=Bn("rp,rt"),Zn=Gn(Kn,zn),Jn=Gn(Hn,Gn(zn,Bn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Gn(Kn,Bn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zn),Qn=Bn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Wn=Bn("srcset"),$n=Gn(Qn,Wn,Bn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Bn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Yn=Bn("script,style,template");class Xn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Jn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Yn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!$n.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Qn[o]&&(s=qn(s)),Wn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>qn(t.trim())).join(", ")),this.buf.push(" ",e,'="',nr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Jn.hasOwnProperty(e)&&!Hn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(nr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const tr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,er=/([^\#-~ |!])/g;function nr(t){return t.replace(/&/g,"&amp;").replace(tr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(er,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let rr;function ir(t,e){let n=null;try{rr=rr||function(t){const e=new Mn(t);return function(){try{return!!(new window.DOMParser).parseFromString(En(""),"text/html")}catch(t){return!1}}()?new Fn(e):e}(t);let r=e?String(e):"";n=rr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=rr.getInertBodyElement(r)}while(r!==o);return En((new Xn).sanitizeChildren(or(n)||n))}finally{if(n){const t=or(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function or(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var sr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function ar(t,e){t.__ngContext__=e}function ur(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function cr(t){return t.ngDebugContext}function lr(t){return t.ngOriginalError}function hr(t,...e){t.error(...e)}class fr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||hr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?cr(t)?cr(t):this._findContext(lr(t)):null}_findOriginalError(t){let e=lr(t);for(;e&&lr(e);)e=lr(e);return e}}const dr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Z))();function pr(t){return t instanceof Function?t():t}var yr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function mr(t,e){return(void 0)(t,e)}function gr(t){const e=t[3];return vt(e)?e[3]:e}function vr(t){return wr(t[13])}function br(t){return wr(t[4])}function wr(t){for(;null!==t&&!vt(t);)t=t[4];return t}function _r(t,e,n,r,i){if(null!=r){let o,s=!1;vt(r)?o=r:gt(r)&&(s=!0,r=r[0]);const a=Pt(r);0===t&&null!==n?null==i?xr(e,n,a):Ar(e,n,a,i||null,!0):1===t&&null!==n?Ar(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Dr(t,e);r&&function(t,e,n,r){Ot(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Pt(n)&&_r(e,t,r,o,i);for(let s=mt;s<n.length;s++){const i=n[s];Lr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Er(t,e,n){return Ot(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Tr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Bt(i,-1)),n.splice(r,1)}function Ir(t,e){if(t.length<=mt)return;const n=mt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Tr(o,r),e>0&&(t[n-1][4]=r[4]);const s=rn(t,mt+e);Lr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Sr(t,e){if(!(256&e[2])){const n=e[11];Ot(n)&&n.destroyNode&&Lr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Cr(t[1],t);for(;e;){let n=null;if(gt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)gt(e)&&Cr(e[1],e),e=e[3];null===e&&(e=t),gt(e)&&Cr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Cr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ee)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Pt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Ot(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&vt(e[3])){n!==e[3]&&Tr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ar(t,e,n,r,i){Ot(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function xr(t,e,n){Ot(t)?t.appendChild(e,n):e.appendChild(n)}function kr(t,e,n,r,i){null!==r?Ar(t,e,n,r,i):xr(t,e,n)}function Dr(t,e){return Ot(t)?t.parentNode(e):e.parentNode}function Nr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===B.None||e===B.Emulated)return null}return Lt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?Lt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)kr(o,i,n[a],s,!1);else kr(o,i,n,s,!1)}function Or(t,e){if(null!==e){const n=e.type;if(3&n)return Lt(e,t);if(4&n)return Pr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Or(t,n);{const n=t[e.index];return vt(n)?Pr(-1,n):Pt(n)}}if(32&n)return mr(e,t)()||Pt(t[e.index]);{const n=Rr(t,e);return null!==n?Array.isArray(n)?n[0]:Or(gr(t[16]),n):Or(t,e.next)}}return null}function Rr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Pr(t,e){const n=mt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Or(t,r)}return e[7]}function Vr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&ar(Pt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Vr(t,e,n.child,r,i,o,!1),_r(e,t,i,a,o);else if(32&u){const s=mr(n,r);let u;for(;u=s();)_r(e,t,i,u,o);_r(e,t,i,a,o)}else 16&u?Fr(t,e,r,n,i,o):_r(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Lr(t,e,n,r,i,o){Vr(n,r,t.firstChild,e,i,o,!1)}function Fr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)_r(e,t,i,a[u],o);else Vr(t,e,a,s[3],i,o,!0)}function Mr(t,e,n){Ot(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function jr(t,e,n){Ot(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Ur(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const qr="ng-template";function Br(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Ur(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Gr(t){return 4===t.type&&t.value!==qr}function Hr(t,e,n){return e===(4!==t.type||n?t.value:qr)}function zr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Ie(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Hr(t,u,n)||""===u&&1===e.length){if(Kr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Br(t.attrs,c,n)){if(Kr(r))return!1;s=!0}continue}const l=Zr(8&r?"class":u,i,Gr(t),n);if(-1===l){if(Kr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Ur(e,c,0)||2&r&&c!==t){if(Kr(r))return!1;s=!0}}}}else{if(!s&&!Kr(r)&&!Kr(u))return!1;if(s&&Kr(u))continue;s=!1,r=u|1&r}}return Kr(r)||s}function Kr(t){return 0==(1&t)}function Zr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Jr(t,e,n=!1){for(let r=0;r<e.length;r++)if(zr(t,e[r],n))return!0;return!1}function Qr(t,e){return t?":not("+e.trim()+")":e}function Wr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Kr(s)||(e+=Qr(o,i),i=""),r=s,o=o||!Kr(r);n++}return""!==i&&(e+=Qr(o,i)),e}const $r={};function Yr(t){Xr(Kt(),zt(),fe()+t,Yt())}function Xr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&me(e,r,n)}else{const r=t.preOrderHooks;null!==r&&ge(e,r,0,n)}de(n)}function ti(t,e){return t<<17|e<<2}function ei(t){return t>>17&32767}function ni(t){return 2|t}function ri(t){return(131068&t)>>2}function ii(t,e){return-131069&t|e<<2}function oi(t){return 1|t}function si(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];re(i),n.contentQueries(2,e[o],o)}}}function ai(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,qt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function ui(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Qt(),s=$t(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Gt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Gt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Wt(o,!0),o}function ci(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function li(t,e,n){se(e);try{const r=t.viewQuery;null!==r&&Fi(1,r,n);const i=t.template;null!==i&&di(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&si(t,e),t.staticViewQueries&&Fi(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Oi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,he()}}function hi(t,e,n,r){const i=e[2];if(256==(256&i))return;se(e);const o=Yt();try{qt(e),Gt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&di(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&me(e,n,null)}else{const n=t.preOrderHooks;null!==n&&ge(e,n,0,null),ve(e,0)}if(function(t){for(let e=vr(t);null!==e;e=br(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Bt(r,1),n[2]|=1024}}}(e),function(t){for(let e=vr(t);null!==e;e=br(e))for(let t=mt;t<e.length;t++){const n=e[t],r=n[1];jt(n)&&hi(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&si(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&me(e,n)}else{const n=t.contentHooks;null!==n&&ge(e,n,1),ve(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)de(~r);else{const i=r,o=n[++t],s=n[++t];ee(o,i),s(2,e[i])}}}finally{de(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Di(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Fi(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&me(e,n)}else{const n=t.viewHooks;null!==n&&ge(e,n,2),ve(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Bt(e[3],-1))}finally{he()}}function fi(t,e,n,r){const i=e[10],o=!Yt(),s=4==(4&e[2]);try{o&&!s&&i.begin&&i.begin(),s&&li(t,e,r),hi(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function di(t,e,n,r,i){const o=fe(),s=2&r;try{de(-1),s&&e.length>yt&&Xr(t,e,yt,Yt()),n(r,i)}finally{de(o)}}function pi(t,e,n){Ht()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Pe(n,e),ar(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Et(r);o&&Ci(e,n,r);const u=ze(e,t,a,n);ar(u,e),null!==s&&Ai(0,a-i,u,r,0,s),o&&(Mt(n.index,e)[8]=u)}}(t,e,n,Lt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Gt.lFrame.currentDirectiveIndex;try{de(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ne(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||_i(r,i)}}finally{de(-1),ne(s)}}(t,e,n))}function yi(t,e,n=Lt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function mi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=gi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function gi(t,e,n,r,i,o,s,a,u,c){const l=yt+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:$r);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function vi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function bi(t,e,n,r){let i=!1;if(Ht()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Jr(n,s.selectors,!1)&&(i||(i=[]),Me(Pe(n,e),t,s.type),Et(s)?(Ei(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ii(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=ci(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ce(n.mergedAttrs,c.hostAttrs),Si(t,n,e,u,c),Ti(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Gr(e)?null:xi(n,i);o.push(c),s=vi(n,u,s),a=vi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new T("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ce(n.mergedAttrs,n.attrs),i}function wi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function _i(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ei(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Ti(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Et(e)&&(n[""]=t)}}function Ii(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Si(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Tt(i.type)),s=new Ee(o,Et(i),null);t.blueprint[r]=s,n[r]=s,wi(t,e,0,r,ci(t,n,i.hostVars,$r),i)}function Ci(t,e,n){const r=Lt(e,t),i=mi(n),o=t[10],s=Ri(t,ai(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ai(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function xi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function ki(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Di(t,e){const n=Mt(e,t);if(jt(n)){const t=n[1];80&n[2]?hi(t,n,t.template,n[8]):n[5]>0&&Ni(n)}}function Ni(t){for(let n=vr(t);null!==n;n=br(n))for(let t=mt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];hi(t,e,t.template,e[8])}else e[5]>0&&Ni(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Mt(e[n],t);jt(r)&&r[5]>0&&Ni(r)}}function Oi(t,e){const n=Mt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),li(r,n,n[8])}function Ri(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Pi(t){for(;t;){t[2]|=64;const e=gr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Vi(t,e,n){const r=e[10];r.begin&&r.begin();try{hi(t,e,t.template,n)}catch(i){throw qi(e,i),i}finally{r.end&&r.end()}}function Li(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=ur(n),i=r[1];fi(i,r,i.template,n)}}(t[8])}function Fi(t,e,n){re(0),e(t,n)}const Mi=(()=>Promise.resolve(null))();function ji(t){return t[7]||(t[7]=[])}function Ui(t){return t.cleanup||(t.cleanup=[])}function qi(t,e){const n=t[9],r=n?n.get(fr,null):null;r&&r.handleError(e)}function Bi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Gi(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=v(i,t):2==o&&(r=v(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Hi=new tn("INJECTOR",-1);class zi{get(t,e=un){if(e===un){const e=new Error(`NullInjectorError: No provider for ${g(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ki=new tn("Set Injector scope."),Zi={},Ji={};let Qi;function Wi(){return void 0===Qi&&(Qi=new zi),Qi}function $i(t,e=null,n=null,r){return new Yi(t,n,e||Wi(),r)}class Yi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&en(e,n=>this.processProvider(n,t,e)),en([t],t=>this.processInjectorType(t,[],i)),this.records.set(Hi,eo(void 0,this));const o=this.records.get(Ki);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:g(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=un,n=L.Default){this.assertNotDestroyed();const r=dn(this);try{if(!(n&L.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof tn)&&k(t);e=n&&this.injectableDefInScope(n)?eo(Xi(t),Zi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&L.Self?Wi():this.parent).get(t,e=n&L.Optional&&e===un?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(g(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[ln]&&i.unshift(e[ln]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=g(e);if(Array.isArray(e))i=e.map(g).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):g(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(cn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{dn(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(g(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=_(t)))return!1;let r=N(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=N(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{en(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];en(r,t=>this.processProvider(t,n,r||Q))}}this.injectorDefTypes.add(o);const a=Tt(o)||(()=>new o);this.records.set(o,eo(a,Zi));const u=r.providers;if(null!=u&&!s){const e=t;en(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ro(t=_(t))?t:_(t&&t.provide);const i=function(t,e,n){return no(t)?eo(void 0,t.useValue):eo(to(t),Zi)}(t);if(ro(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=eo(void 0,Zi,!0),e.factory=()=>mn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Zi&&(e.value=Ji,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=_(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function Xi(t){const e=k(t),n=null!==e?e.factory:Tt(t);if(null!==n)return n;if(t instanceof tn)throw new Error(`Token ${g(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${g(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[O]||t[P]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function to(t,e,n){let r;if(ro(t)){const e=_(t);return Tt(e)||Xi(e)}if(no(t))r=()=>_(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...mn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>yn(_(t.useExisting));else{const e=_(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Tt(e)||Xi(e);r=()=>new e(...mn(t.deps))}var i;return r}function eo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function no(t){return null!==t&&"object"==typeof t&&hn in t}function ro(t){return"function"==typeof t}const io=function(t,e,n){return function(t,e=null,n=null,r){const i=$i(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let oo=(()=>{class t{static create(t,e){return Array.isArray(t)?io(t,e,""):io(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=un,t.NULL=new zi,t.\u0275prov=A({token:t,providedIn:"any",factory:()=>yn(Hi)}),t.__NG_ELEMENT_ID__=-1,t})();function so(t,e){ye(ur(t)[1],Jt())}function ao(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(Et(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=uo(t.inputs),e.declaredInputs=uo(t.declaredInputs),e.outputs=uo(t.outputs);const n=i.hostBindings;n&&ho(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&co(t,o),s&&lo(t,s),m(t.inputs,i.inputs),m(t.declaredInputs,i.declaredInputs),m(t.outputs,i.outputs),Et(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===ao&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ce(i.hostAttrs,n=Ce(n,i.hostAttrs))}}(r)}function uo(t){return t===J?{}:t===Q?[]:t}function co(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function lo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function ho(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let fo=null;function po(){if(!fo){const t=Z.Symbol;if(t&&t.iterator)fo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(fo=n)}}}return fo}function yo(t){return!!mo(t)&&(Array.isArray(t)||!(t instanceof Map)&&po()in t)}function mo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function go(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function vo(t,e,n,r){const i=zt();return go(i,te(),e)&&(Kt(),function(t,e,n,r,i,o){const s=Lt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Ot(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?I(o):s(o,r||"",i);Ot(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(pe(),i,t,e,n,r)),vo}function bo(t,e,n,r,i,o,s,a){const u=zt(),c=Kt(),l=t+yt,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=ui(e,t,4,s||null,Ut(c,a));bi(e,n,l,Ut(c,u)),ye(e,l);const h=l.tViews=gi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Wt(h,!1);const f=u[11].createComment("");Nr(c,u,f,h),ar(f,u),Ri(u,u[l]=ki(f,u,f,h)),_t(h)&&pi(c,u,h),null!=s&&yi(u,h,a)}function wo(t,e=L.Default){const n=zt();return null===n?yn(t,e):qe(Jt(),n,_(t),e)}function _o(t,e,n){const r=zt();return go(r,te(),e)&&function(t,e,n,r,i,o,s,a){const u=Lt(e,n);let c,l=e.inputs;var h;null!=l&&(c=l[r])?(Bi(t,n,c,r,i),wt(e)&&function(t,e){const n=Mt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Ot(o)?o.setProperty(u,r,i):Se(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}(Kt(),pe(),r,t,e,r[11],n),_o}function Eo(t,e,n,r,i){const o=i?"class":"style";Bi(t,n,e.inputs[o],o,r)}function To(t,e,n,r){const i=zt(),o=Kt(),s=yt+t,a=i[11],u=i[s]=Er(a,e,Gt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ui(e,t,2,i,Ut(a,o));return bi(e,n,u,Ut(a,s)),null!==u.attrs&&Gi(u,u.attrs,!1),null!==u.mergedAttrs&&Gi(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Wt(c,!0);const l=c.mergedAttrs;null!==l&&Te(a,u,l);const h=c.classes;null!==h&&jr(a,u,h);const f=c.styles;null!==f&&Mr(a,u,f),64!=(64&c.flags)&&Nr(o,i,u,c),0===Gt.lFrame.elementDepthCount&&ar(u,i),Gt.lFrame.elementDepthCount++,_t(c)&&(pi(o,i,c),function(t,e,n){if(bt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&yi(i,c)}function Io(){let t=Jt();$t()?Gt.lFrame.isParent=!1:(t=t.parent,Wt(t,!1));const e=t;Gt.lFrame.elementDepthCount--;const n=Kt();n.firstCreatePass&&(ye(n,t),bt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Eo(n,e,zt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Eo(n,e,zt(),e.stylesWithoutHost,!1)}function So(t,e,n,r){To(t,e,n,r),Io()}function Co(){return zt()}function Ao(t){return!!t&&"function"==typeof t.then}function xo(t){return!!t&&"function"==typeof t.subscribe}const ko=xo;function Do(t,e,n,r){const i=zt(),o=Kt(),s=Jt();return function(t,e,n,r,i,o,s,a){const u=_t(r),c=t.firstCreatePass&&Ui(t),l=ji(e);let h=!0;if(3&r.type||a){const f=Lt(r,e),d=a?a(f):f,p=l.length,y=a?t=>a(Pt(t[r.index])):r.index;if(Ot(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Oo(r,e,0,o,!1);const t=n.listen(d,i,o);l.push(o,t),c&&c.push(i,y,p,p+1)}}else o=Oo(r,e,0,o,!0),d.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,p,s)}else o=Oo(r,e,0,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),Do}function No(t,e,n,r){try{return!1!==n(r)}catch(i){return qi(t,i),!1}}function Oo(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Mt(t.index,e):e;0==(32&e[2])&&Pi(s);let a=No(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=No(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Ro(t=1){return function(t){return(Gt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Gt.lFrame.contextLView))[8]}(t)}function Po(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ei(o):ri(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Vo(t[a],e)&&(u=!0,t[a+1]=r?oi(n):ni(n)),a=r?ei(n):ri(n)}u&&(t[n+1]=r?ni(o):oi(o))}function Vo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&an(t,e)>=0}function Lo(t,e){return function(t,e,n,r){const i=zt(),o=Kt(),s=function(t){const e=Gt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[fe()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Gt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Mo(n=Fo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Fo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==ri(r))return t[ei(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Fo(null,t,e,n[1],r),n=Mo(n,e.attrs,r),function(t,e,n,r){t[ei(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Mo(r,t[o].hostAttrs,true);return Mo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ei(s),u=ri(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||an(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=ei(t[a+1]);t[r+1]=ti(e,a),0!==e&&(t[e+1]=ii(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=ti(a,0),0!==a&&(t[a+1]=ii(t[a+1],r)),a=r;else t[r+1]=ti(u,0),0===a?a=r:t[u+1]=ii(t[u+1],r),u=r;l&&(t[r+1]=ni(t[r+1])),Po(t,c,r,!0),Po(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&an(o,e)>=0&&(n[r+1]=oi(n[r+1]))}(e,c,t,r),s=ti(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==$r&&go(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Uo(1==(1&c)?jo(u,e,n,i,ri(c),s):void 0)||(Uo(o)||function(t){return 2==(2&t)}(c)&&(o=jo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Ot(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Vt(fe(),n),i,o))}(o,o.data[fe()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=g(kn(t))),t}(e),true,s)}(t,e),Lo}function Fo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Mo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Mo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),on(t,s,!!n||e[++o]))}return void 0===t?null:t}function jo(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===$r&&(l=c?Q:void 0);let h=c?sn(l,r):u===r?l:void 0;if(o&&!Uo(h)&&(h=sn(e,r)),Uo(h)&&(a=h,s))return a;const f=t[i+1];i=s?ei(f):ri(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=sn(t,r))}return a}function Uo(t){return void 0!==t}function qo(t,e=""){const n=zt(),r=Kt(),i=t+yt,o=r.firstCreatePass?ui(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Ot(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Nr(r,n,s,o),Wt(o,!1)}function Bo(t,e,n){const r=zt(),i=function(t,e,n,r){return go(t,te(),n)?e+I(n)+r:$r}(r,t,e,n);return i!==$r&&function(t,e,n){const r=Vt(e,t);!function(t,e,n){Ot(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,fe(),i),Bo}const Go=void 0;var Ho=["en",[["a","p"],["AM","PM"],Go],[["AM","PM"],Go,Go],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Go,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Go,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Go,"{1} 'at' {0}",Go],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let zo={};function Ko(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Jo(e);if(n)return n;const r=e.split("-")[0];if(n=Jo(r),n)return n;if("en"===r)return Ho;throw new Error(`Missing locale data for the locale "${t}".`)}function Zo(t){return Ko(t)[Qo.PluralCase]}function Jo(t){return t in zo||(zo[t]=Z.ng&&Z.ng.common&&Z.ng.common.locales&&Z.ng.common.locales[t]),zo[t]}var Qo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Wo="en-US";let $o=Wo;function Yo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&($o=t.toLowerCase().replace(/_/g,"-"))}function Xo(t,e,n,r,i){if(t=_(t),Array.isArray(t))for(let o=0;o<t.length;o++)Xo(t[o],e,n,r,i);else{const o=Kt(),s=zt();let a=ro(t)?t:_(t.provide),u=to(t);const c=Jt(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(ro(t)||!t.multi){const r=new Ee(u,i,wo),d=ns(a,e,i?l:l+f,h);-1===d?(Me(Pe(c,s),o,a),ts(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=ns(a,e,l+f,h),p=ns(a,e,l,l+f),y=d>=0&&n[d],m=p>=0&&n[p];if(i&&!m||!i&&!y){Me(Pe(c,s),o,a);const l=function(t,e,n,r,i){const o=new Ee(t,n,wo);return o.multi=[],o.index=e,o.componentProviders=0,es(o,i,r&&!n),o}(i?is:rs,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),ts(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else ts(o,t,d>-1?d:p,es(n[i?p:d],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function ts(t,e,n,r){const i=ro(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function es(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ns(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function rs(t,e,n,r){return os(this.multi,[])}function is(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=ze(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),os(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],os(i,o);return o}function os(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ss(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Kt();if(r.firstCreatePass){const i=Et(t);Xo(n,r.data,r.blueprint,i,!0),Xo(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class as{}class us{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${g(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let cs=(()=>{class t{}return t.NULL=new us,t})();function ls(...t){}function hs(t,e){return new ds(Lt(t,e))}const fs=function(){return hs(Jt(),zt())};let ds=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=fs,t})();class ps{}let ys=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ms(),t})();const ms=function(){const t=zt(),e=Mt(Jt().index,t);return function(t){return t[11]}(gt(e)?e:t)};let gs=(()=>{class t{}return t.\u0275prov=A({token:t,providedIn:"root",factory:()=>null}),t})();class vs{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const bs=new vs("12.0.5");class ws{constructor(){}supports(t){return yo(t)}create(t){return new Es(t)}}const _s=(t,e)=>e;class Es{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||_s}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Cs(n,r,i)?e:n,s=Cs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!yo(t))throw new Error(`Error trying to diff '${g(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[po()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Ts(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ss),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ss),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ts{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Is{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ss{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Is,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class As{constructor(){}supports(t){return t instanceof Map||mo(t)}create(){return new xs}}class xs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||mo(t)))throw new Error(`Error trying to diff '${g(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ks(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ks{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ds(){return new Ns([new ws])}let Ns=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Ds()),deps:[[t,new wn,new bn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=A({token:t,providedIn:"root",factory:Ds}),t})();function Os(){return new Rs([new As])}let Rs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||Os()),deps:[[t,new wn,new bn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=A({token:t,providedIn:"root",factory:Os}),t})();function Ps(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Pt(o)),vt(o))for(let t=mt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&Ps(e[1],e,n,r)}const s=n.type;if(8&s)Ps(t,e,n.child,r);else if(32&s){const t=mr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Rr(e,n);if(Array.isArray(t))r.push(...t);else{const n=gr(e[16]);Ps(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class Vs{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ps(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(vt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Ir(t,n),rn(e,n))}this._attachedToViewContainer=!1}Sr(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,r){const i=ji(e);i.push(r)}(0,this._lView,0,t)}markForCheck(){Pi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Vi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Xt(!0);try{Vi(t,e,n)}finally{Xt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Lr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ls extends Vs{constructor(t){super(t),this._view=t}detectChanges(){Li(this._view)}checkNoChanges(){!function(t){Xt(!0);try{Li(t)}finally{Xt(!1)}}(this._view)}get context(){return null}}const Fs=function(t){return function(t,e,n){if(wt(t)&&!n){const n=Mt(t.index,e);return new Vs(n,n)}return 47&t.type?new Vs(e[16],e):null}(Jt(),zt(),16==(16&t))};let Ms=(()=>{class t{}return t.__NG_ELEMENT_ID__=Fs,t})();const js=[new As],Us=new Ns([new ws]),qs=new Rs(js),Bs=function(){return Ks(Jt(),zt())};let Gs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Bs,t})();const Hs=Gs,zs=class extends Hs{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ai(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),li(e,n,t),new Vs(n)}};function Ks(t,e){return 4&t.type?new zs(e,t,hs(t,e)):null}class Zs{}const Js=function(){return function(t,e){let n;const r=e[t.index];if(vt(r))n=r;else{let i;if(8&t.type)i=Pt(r);else{const n=e[11];i=n.createComment("");const r=Lt(t,e);Ar(n,Dr(n,r),i,function(t,e){return Ot(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=ki(r,e,i,t),Ri(e,n)}return new $s(n,t,e)}(Jt(),zt())};let Qs=(()=>{class t{}return t.__NG_ELEMENT_ID__=Js,t})();const Ws=Qs,$s=class extends Ws{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return hs(this._hostTNode,this._hostLView)}get injector(){return new Je(this._hostTNode,this._hostLView)}get parentInjector(){const t=Fe(this._hostTNode,this._hostLView);if(xe(t)){const e=De(t,this._hostLView),n=ke(t);return new Je(e[1].data[n+8],e)}return new Je(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Ys(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-mt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Zs,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(vt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new $s(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=mt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-mt?(e[4]=n[i],nn(n,mt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Pr(i,o),a=n[11],u=Dr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Lr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),nn(Xs(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Ys(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Ir(this._lContainer,e);n&&(rn(Xs(this._lContainer),e),Sr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Ir(this._lContainer,e);return n&&null!=rn(Xs(this._lContainer),e)?new Vs(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Ys(t){return t[8]}function Xs(t){return t[8]||(t[8]=[])}const ta={};class ea extends cs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=dt(t);return new ia(e,this.ngModule)}}function na(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ra=new tn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>dr});class ia extends as{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Wr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return na(this.componentDef.inputs)}get outputs(){return na(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ta,i);return o!==ta||r===ta?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ps,Rt),s=i.get(gs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ot(t))return t.selectRootElement(e,n===B.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Er(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:dr,clean:Mi,playerHandler:null,flags:0},f=gi(0,null,null,1,0,null,null,null,null,null),d=ai(null,f,h,l,null,null,o,a,s,i);let p,y;se(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ui(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Gi(a,u,!0),null!==t&&(Te(i,t,u),null!==a.classes&&jr(i,t,a.classes),null!==a.styles&&Mr(i,t,a.styles)));const c=r.createRenderer(t,e),l=ai(n,mi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(Me(Pe(a,n),s,e.type),Ei(s,a),Ii(a,n.length,1)),Ri(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)Te(a,c,["ng-version",bs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Kr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Te(a,c,t),e&&e.length>0&&jr(a,c,e.join(" "))}if(y=Ft(f,yt),void 0!==e){const t=y.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Jt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Si(t,r,e,ci(t,e,1,null),n));const i=ze(e,t,r.directiveStart,r);ar(i,e);const o=Lt(r,e);return o&&ar(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Jt();e.contentQueries(1,s,t.directiveStart)}const a=Jt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(de(a.index),wi(n[1],a,0,a.directiveStart,a.directiveEnd,e),_i(e,s)),s}(t,this.componentDef,d,h,[so]),li(f,d,null)}finally{he()}return new oa(this.componentType,p,hs(y,d),d,y)}}class oa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new Ls(r),this.componentType=t}get injector(){return new Je(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const sa=new Map;class aa extends Zs{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ea(this);const n=pt(t),r=t[tt]||null;r&&Yo(r),this._bootstrapComponents=pr(n.bootstrap),this._r3Injector=$i(t,e,[{provide:Zs,useValue:this},{provide:cs,useValue:this.componentFactoryResolver}],g(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=oo.THROW_IF_NOT_FOUND,n=L.Default){return t===oo||t===Zs||t===Hi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class ua extends class{}{constructor(t){super(),this.moduleType=t,null!==pt(t)&&function(t){const e=new Set;!function t(n){const r=pt(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${g(e)} vs ${g(e.name)}`)}(i,sa.get(i),n),sa.set(i,n));const o=pr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new aa(this.moduleType,t)}}function ca(t){return e=>{setTimeout(t,void 0,e)}}const la=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=ca(u),a&&(a=ca(a)),c&&(c=ca(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function ha(t,e){return Ks(t,e)}const fa=new tn("Application Initializer");let da=(()=>{class t{constructor(t){this.appInits=t,this.resolve=ls,this.reject=ls,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Ao(e))t.push(e);else if(ko(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(yn(fa,8))},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();const pa=new tn("AppId"),ya={provide:pa,useFactory:function(){return`${ma()}${ma()}${ma()}`},deps:[]};function ma(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ga=new tn("Platform Initializer"),va=new tn("Platform ID"),ba=new tn("appBootstrapListener");let wa=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();const _a=new tn("LocaleId"),Ea=new tn("DefaultCurrencyCode");class Ta{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Ia=function(t){return new ua(t)},Sa=Ia,Ca=function(t){return Promise.resolve(Ia(t))},Aa=function(t){const e=Ia(t),n=pr(pt(t).declarations).reduce((t,e)=>{const n=dt(e);return n&&t.push(new ia(n)),t},[]);return new Ta(e,n)},xa=Aa,ka=function(t){return Promise.resolve(Aa(t))};let Da=(()=>{class t{constructor(){this.compileModuleSync=Sa,this.compileModuleAsync=Ca,this.compileModuleAndAllComponentsSync=xa,this.compileModuleAndAllComponentsAsync=ka}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();const Na=(()=>Promise.resolve(0))();function Oa(t){"undefined"==typeof Zone?Na.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ra{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new la(!1),this.onMicrotaskEmpty=new la(!1),this.onStable=new la(!1),this.onError=new la(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=Z.requestAnimationFrame,e=Z.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Z,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,La(t),t.isCheckStableRunning=!0,Va(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),La(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Fa(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Ma(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Fa(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ma(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,La(t),Va(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ra.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ra.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Pa,ls,ls);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Pa={};function Va(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function La(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Fa(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ma(t){t._nesting--,Va(t)}class ja{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new la,this.onMicrotaskEmpty=new la,this.onStable=new la,this.onError=new la}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Ua=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ra.assertNotInAngularZone(),Oa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Oa(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(yn(Ra))},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})(),qa=(()=>{class t{constructor(){this._applications=new Map,za.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return za.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();class Ba{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Ga(t){za=t}let Ha,za=new Ba,Ka=!0,Za=!1;function Ja(){return Za=!0,Ka}function Qa(){if(Za)throw new Error("Cannot enable prod mode after platform setup.");Ka=!1}const Wa=new tn("AllowMultipleToken");class $a{constructor(t,e){this.name=t,this.token=e}}function Ya(t,e,n=[]){const r=`Platform: ${e}`,i=new tn(r);return(e=[])=>{let o=Xa();if(!o||o.injector.get(Wa,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ki,useValue:"platform"});!function(t){if(Ha&&!Ha.destroyed&&!Ha.injector.get(Wa,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ha=t.get(tu);const e=t.get(ga,null);e&&e.forEach(t=>t())}(oo.create({providers:t,name:r}))}return function(t){const e=Xa();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Xa(){return Ha&&!Ha.destroyed?Ha:null}let tu=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ja:("zone.js"===t?void 0:t)||new Ra({enableLongStackTrace:Ja(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Ra,useValue:n}];return n.run(()=>{const e=oo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(fr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{ru(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Ao(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(da);return t.runInitializers(),t.donePromise.then(()=>(Yo(i.injector.get(_a,Wo)||Wo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=eu({},e);return function(t,e,n){const r=new ua(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(nu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${g(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(yn(oo))},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();function eu(t,e){return Array.isArray(e)?e.reduce(eu,t):Object.assign(Object.assign({},t),e)}let nu=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ra.assertNotInAngularZone(),Oa(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ra.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(a,c.pipe(t=>{return u()((e=p,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,f);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof as?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Zs),i=n.create(oo.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Ua,null),a=s&&i.injector.get(qa);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),ru(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;ru(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ba,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(yn(Ra),yn(oo),yn(fr),yn(cs),yn(da))},t.\u0275prov=A({token:t,factory:t.\u0275fac}),t})();function ru(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const iu=function(t){return null},ou=Ya(null,"core",[{provide:va,useValue:"unknown"},{provide:tu,deps:[oo]},{provide:qa,deps:[]},{provide:wa,deps:[]}]),su=[{provide:nu,useClass:nu,deps:[Ra,oo,fr,cs,da]},{provide:ra,deps:[Ra],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:da,useClass:da,deps:[[new bn,fa]]},{provide:Da,useClass:Da,deps:[]},ya,{provide:Ns,useFactory:function(){return Us},deps:[]},{provide:Rs,useFactory:function(){return qs},deps:[]},{provide:_a,useFactory:function(t){return Yo(t=t||"undefined"!=typeof $localize&&$localize.locale||Wo),t},deps:[[new vn(_a),new bn,new wn]]},{provide:Ea,useValue:"USD"}];let au=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(yn(nu))},t.\u0275mod=ut({type:t}),t.\u0275inj=x({providers:su}),t})()},7120:(t,e,n)=>{"use strict";n.d(e,{hO:()=>D,xv:()=>T,Dh:()=>E,HU:()=>g,GT:()=>_,sI:()=>x,on:()=>S,ss:()=>v,pX:()=>w,yq:()=>C});var r=n(8489),i=n(8569),o=n(6673);function s(){}var a=n(5024);class u{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new c(t,this.nextOrObserver,this.error,this.complete))}}class c extends o.L{constructor(t,e,n,r){super(t),this._tapNext=s,this._tapError=s,this._tapComplete=s,this._tapError=n||s,this._tapComplete=r||s,(0,a.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||s,this._tapError=e.error||s,this._tapComplete=e.complete||s)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}var l=n(4187),h=n(9098),f=n(25),d=n(1858);function p(){}t=n.hmd(t);class y{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class m{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",p,{},p,p)),e.pipe((r={next:n,complete:n,error:n},function(t){return t.lift(new u(r,void 0,void 0))})).subscribe(t).add(n);var r}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class g{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new y(Zone.current)),this.insideAngular=t.run(()=>new y(Zone.current,i.z))}}function v(t){return function(e){return(e=e.lift(new m(t.ngZone))).pipe((0,l.R)(t.outsideAngular),(0,h.QV)(t.insideAngular))}}const b=["ngOnDestroy"],w=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(b.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),_=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},E=new f.OlP("angularfire2.app.options"),T=new f.OlP("angularfire2.app.nameOrConfig"),I=new f.GfV("6.1.5");function S(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=d.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>d.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&A("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{A("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},A=(t,...e)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function x(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&A("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const k={provide:class{},useFactory:S,deps:[E,f.R0b,[new f.FiY,T]]};let D=(()=>{class t{constructor(t){d.Z.registerVersion("angularfire",I.full,t.toString()),d.Z.registerVersion("angular",f.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:E,useValue:e},{provide:T,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(f.LFG(f.Lbi))},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({providers:[k]}),t})()},1062:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,o=n(4762),s=n(250),a=n(5119),u=n(308),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),y=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();y.prototype.name&&y.prototype.options||y.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.6.8",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||f))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(y);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new g(t)},"PRIVATE")),t.registerVersion(h,"0.6.27",void 0),t.registerVersion("fire-js","")}(w);const _=w},5119:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u});var r=n(4762),i=n(250),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,function(){var t;return(0,r.Jh)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),(0,r.CR)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var l=(0,r.CR)(c.value,2),h=l[1];s===this.normalizeInstanceIdentifier(l[0])&&h.resolve(a)}}catch(f){e={error:f}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(a,s),a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.XA)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},308:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>f,Am:()=>d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},250:(t,e,n)=>{"use strict";n.d(e,{BH:()=>a,LL:()=>b,r3:()=>E,Sg:()=>u,ne:()=>T,p$:()=>o,ZB:()=>s,m9:()=>C,z$:()=>c,jU:()=>f,ru:()=>d,d:()=>y,w1:()=>m,uI:()=>l,UG:()=>h,b$:()=>p,Mn:()=>g});var r=n(4762),i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function o(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var a=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",o=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:o,exp:o+3600,auth_time:o,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[i.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),i.encodeString(JSON.stringify(a),!1),""].join(".")}function c(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function l(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(c())}function h(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function f(){return"object"==typeof self&&self.self===self}function d(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function p(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){return c().indexOf("Electron/")>=0}function m(){var t=c();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return c().indexOf("MSAppHost/")>=0}var v=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,b.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),b=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?w(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new v(i,a,r);return u},t}();function w(t,e){return t.replace(_,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var _=/\{\$([^}]+)}/g;function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function T(t,e){var n=new I(t,e);return n.subscribe.bind(n)}var I=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function S(){}function C(t){return t&&t._delegate?t._delegate:t}},1858:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(1062),i="8.6.8";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},8318:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(6673),i=n(5331),o=n(7498),s=n(6197),a=n(3392),u=n(1484);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},7498:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(1484),i=n(4294);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},5959:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(8318),i=n(6673),o=n(7570),s=n(3895),a=n(9291),u=n(5331);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},9291:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(7570);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},6673:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(5024),i=n(7498),o=n(7570),s=n(5331),a=n(1484),u=n(4294);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},7570:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(8470),i=n(2056),o=n(5024);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if((0,o.m)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},1484:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},6882:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(6673),i=n(8318),o=n(6015);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},653:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(8318);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},9764:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(8318),i=n(6015),o=n(7570),s=n(6197),a=n(2570),u=n(5686),c=n(5168),l=n(9653);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},9342:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(8318),i=n(625),o=n(2570);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},1906:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(8318),i=n(6163),o=n(9109),s=n(9342);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},878:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(6163),i=n(9342),o=n(2570);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},9996:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(6673);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},9109:(t,e,n)=>{"use strict";n.d(e,{J:()=>l});var r=n(9996),i=n(9764),o=n(6882);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}var c=n(3392);function l(t=Number.POSITIVE_INFINITY){return s(c.y,t)}},9098:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(6673),i=n(653),o=n(878),s=n(8318);let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},4187:(t,e,n)=>{"use strict";n.d(e,{R:()=>m});var r=n(8318);let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(8277);class l extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n(1098);class f extends h.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n(8470);class y extends r.y{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,p.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new y(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(y.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new y(e,this.delay,this.scheduler).subscribe(t)}}},2570:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(8318),i=n(7570);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},8277:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(7570);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},1098:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},8569:(t,e,n)=>{"use strict";n.d(e,{z:()=>i});var r=n(8277);const i=new(n(1098).v)(r.o)},8489:(t,e,n)=>{"use strict";n.d(e,{c:()=>u,N:()=>a});var r=n(8277);class i extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n(1098);class s extends o.v{}const a=new s(i),u=a},5686:(t,e,n)=>{"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,{hZ:()=>i});const i=r()},6197:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},5331:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},3895:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4294:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},3392:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},8470:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},9653:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},5024:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},2056:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},5168:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},6163:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},6015:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(625),i=n(4294),o=n(5686),s=n(6197),a=n(9653),u=n(5168),c=n(2056);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},625:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},4508:(t,e,n)=>{"use strict";var r=n(25);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");var a=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const u=r.kL8;class c{}let l=(()=>{class t extends c{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(u(e||this.locale)(t)){case a.Zero:return"zero";case a.One:return"one";case a.Two:return"two";case a.Few:return"few";case a.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class h{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let f=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(Cd){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new h(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new d(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new d(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class d{constructor(t,e){this.record=t,this.view=e}}let p=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new y,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){m("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){m("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class y{constructor(){this.$implicit=null,this.ngIf=null}}function m(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:c,useClass:l}]}),t})();function v(t){return"server"===t}class b extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new b,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(_=_||document.querySelector("base"),_?_.getAttribute("href"):null);return null==e?null:function(t){w=w||document.createElement("a"),w.setAttribute("href",t);const e=w.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){_=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let w,_=null;const E=new r.OlP("TRANSITION_ID"),T=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[E,s,r.zs3],multi:!0}];class I{static init(){(0,r.VLi)(new I)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let S=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const C=new r.OlP("EventManagerPlugins");let A=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(C),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class x{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let k=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),D=(()=>{class t extends k{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(N),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(N))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function N(t){o().remove(t)}const O={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},R=/%COMP%/g;function P(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?P(t,i,n):(i=i.replace(R,t),n.push(i))}return n}function V(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let L=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new F(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new M(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new j(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=P(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(A),r.LFG(D),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class F{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(O[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=O[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=O[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,V(n)):this.eventManager.addEventListener(t,e,V(n))}}class M extends F{constructor(t,e,n,r){super(t),this.component=n;const i=P(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(R,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(R,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class j extends F{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=P(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let U=(()=>{class t extends x{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const q=["alt","control","meta","shift"],B={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},G={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},H={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let z=(()=>{class t extends x{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(q.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&G.hasOwnProperty(e)&&(e=G[e]))}return B[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),q.forEach(r=>{r!=n&&(0,H[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const K=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){b.makeCurrent(),I.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),Z=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:C,useClass:U,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:C,useClass:z,multi:!0,deps:[s]},[],{provide:L,useClass:L,deps:[A,D,r.AFp]},{provide:r.FYo,useExisting:L},{provide:k,useExisting:D},{provide:D,useClass:D,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:A,useClass:A,deps:[C,r.R0b]},{provide:class{},useClass:S,deps:[]},[]];let J=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:E,useExisting:r.AFp},T]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:Z,imports:[g,r.hGG]}),t})();"undefined"!=typeof window&&window;let Q=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-navbar"]],decls:4,vars:0,consts:[[1,"nav-wrapper","black"],["href","/",1,"brand-logo","center"]],template:function(t,e){1&t&&(r.TgZ(0,"nav"),r.TgZ(1,"div",0),r.TgZ(2,"a",1),r._uU(3,"FS item manager"),r.qZA(),r.qZA(),r.qZA())},styles:[""]}),t})();var W=n(9996),$=n(8569),Y=n(8318),X=n(9764),tt=n(878),et=n(9109);function nt(...t){return(0,et.J)(1)((0,tt.of)(...t))}var rt=n(6163);function it(...t){const e=t[t.length-1];return(0,rt.K)(e)?(t.pop(),n=>nt(t,n,e)):e=>nt(t,e)}var ot=n(6673);function st(){return t=>t.lift(new at)}class at{call(t,e){return e.subscribe(new ut(t))}}class ut extends ot.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function ct(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new lt(t,e,n))}}class lt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new ht(t,this.accumulator,this.seed,this.hasSeed))}}class ht extends ot.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}class ft{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new dt(t,this.compare,this.keySelector))}}class dt extends ot.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function pt(t,e){return function(n){return n.lift(new yt(t,e))}}class yt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new mt(t,this.predicate,this.thisArg))}}class mt extends ot.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var gt=n(9098),vt=n(7120),bt=n(1858),wt=n(1062),_t=n(250),Et=n(308),Tt=function(t,e){return(Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function It(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var St,Ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},At=At||{},xt=Ct||self;function kt(){}function Dt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Nt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ot="closure_uid_"+(1e9*Math.random()>>>0),Rt=0;function Pt(t,e,n){return t.call.apply(t.bind,arguments)}function Vt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Lt(t,e,n){return(Lt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pt:Vt).apply(null,arguments)}function Ft(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Mt(){return Date.now()}function jt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Pb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Ut(){this.j=this.j,this.i=this.i}Ut.prototype.j=!1,Ut.prototype.ka=function(){!this.j&&(this.j=!0,this.H(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Ot)&&t[Ot]||(t[Ot]=++Rt)}(this)},Ut.prototype.H=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var qt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Bt=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Gt(t){return Array.prototype.concat.apply([],arguments)}function Ht(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function zt(t){return/^[\s\xa0]*$/.test(t)}var Kt,Zt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Jt(t,e){return-1!=t.indexOf(e)}function Qt(t,e){return t<e?-1:t>e?1:0}t:{var Wt=xt.navigator;if(Wt){var $t=Wt.userAgent;if($t){Kt=$t;break t}}Kt=""}function Yt(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Xt(t){var e={};for(var n in t)e[n]=t[n];return e}var te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ee(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<te.length;o++)n=te[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ne(t){return ne[" "](t),t}ne[" "]=kt;var re,ie,oe=Jt(Kt,"Opera"),se=Jt(Kt,"Trident")||Jt(Kt,"MSIE"),ae=Jt(Kt,"Edge"),ue=ae||se,ce=Jt(Kt,"Gecko")&&!(Jt(Kt.toLowerCase(),"webkit")&&!Jt(Kt,"Edge"))&&!(Jt(Kt,"Trident")||Jt(Kt,"MSIE"))&&!Jt(Kt,"Edge"),le=Jt(Kt.toLowerCase(),"webkit")&&!Jt(Kt,"Edge");function he(){var t=xt.document;return t?t.documentMode:void 0}t:{var fe="",de=(ie=Kt,ce?/rv:([^\);]+)(\)|;)/.exec(ie):ae?/Edge\/([\d\.]+)/.exec(ie):se?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ie):le?/WebKit\/(\S+)/.exec(ie):oe?/(?:Version)[ \/]?(\S+)/.exec(ie):void 0);if(de&&(fe=de?de[1]:""),se){var pe=he();if(null!=pe&&pe>parseFloat(fe)){re=String(pe);break t}}re=fe}var ye={};function me(t){return function(t,e){var n=ye;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=Zt(String(re)).split("."),r=Zt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Qt(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Qt(0==s[2].length,0==a[2].length)||Qt(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var ge=xt.document&&se&&(he()||parseInt(re,10))||void 0,ve=!se||9<=Number(ge),be=se&&!me("9"),we=function(){if(!xt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{xt.addEventListener("test",kt,e),xt.removeEventListener("test",kt,e)}catch(n){}return t}();function _e(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Ee(t,e){if(_e.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ce){t:{try{ne(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Te[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}_e.prototype.b=function(){this.defaultPrevented=!0},jt(Ee,_e);var Te={2:"touch",3:"pen",4:"mouse"};Ee.prototype.b=function(){Ee.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,be)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ie="closure_listenable_"+(1e6*Math.random()|0),Se=0;function Ce(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++Se,this.Y=this.Z=!1}function Ae(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function xe(t){this.src=t,this.a={},this.b=0}function ke(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=qt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ae(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function De(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}xe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=De(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ce(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ne="closure_lm_"+(1e6*Math.random()|0),Oe={};function Re(t,e,n,r,i){if(r&&r.once)return Ve(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Re(t,e[o],n,r,i);return null}return n=Ge(n),t&&t[Ie]?t.wa(e,n,Nt(r)?!!r.capture:!!r,i):Pe(t,e,n,!1,r,i)}function Pe(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Nt(i)?!!i.capture:!!i;if(s&&!ve)return null;var a=qe(t);if(a||(t[Ne]=a=new xe(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Ue,e=ve?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)we||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Me(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ve(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ve(t,e[o],n,r,i);return null}return n=Ge(n),t&&t[Ie]?t.xa(e,n,Nt(r)?!!r.capture:!!r,i):Pe(t,e,n,!0,r,i)}function Le(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Le(t,e[o],n,r,i);else r=Nt(r)?!!r.capture:!!r,n=Ge(n),t&&t[Ie]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=De(o=t.a[e],n,r,i))&&(Ae(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=qe(t))&&(e=t.a[e.toString()],t=-1,e&&(t=De(e,n,r,i)),(n=-1<t?e[t]:null)&&Fe(n))}function Fe(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Ie])ke(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Me(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=qe(e))?(ke(n,t),0==n.b&&(n.src=null,e[Ne]=null)):Ae(t)}}}function Me(t){return t in Oe?Oe[t]:Oe[t]="on"+t}function je(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&Fe(t),n.call(r,e)}function Ue(t,e){if(t.Y)return!0;if(!ve){if(!e)t:{e=["window","event"];for(var n=xt,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return je(t,e=new Ee(e,this))}return je(t,new Ee(e,this))}function qe(t){return(t=t[Ne])instanceof xe?t:null}var Be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ge(t){return"function"==typeof t?t:(t[Be]||(t[Be]=function(e){return t.handleEvent(e)}),t[Be])}function He(){Ut.call(this),this.c=new xe(this),this.J=this,this.D=null}function ze(t,e){var n,r=t.D;if(r)for(n=[];r;r=r.D)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new _e(e,t);else if(e instanceof _e)e.target=e.target||t;else{var i=e;ee(e=new _e(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Ke(s,r,!0,e)&&i}if(i=Ke(s=e.a=t,r,!0,e)&&i,i=Ke(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ke(s=e.a=n[o],r,!1,e)&&i}function Ke(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&ke(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}jt(He,Ut),He.prototype[Ie]=!0,(St=He.prototype).addEventListener=function(t,e,n,r){Re(this,t,e,n,r)},St.removeEventListener=function(t,e,n,r){Le(this,t,e,n,r)},St.H=function(){if(He.X.H.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ae(n[r]);delete e.a[t],e.b--}}this.D=null},St.wa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},St.xa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ze=xt.JSON.stringify;function Je(){this.b=this.a=null}var Qe,We=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ye},function(t){t.reset()});function $e(){var t=nn,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ye(){this.next=this.b=this.a=null}function Xe(t){xt.setTimeout(function(){throw t},0)}function tn(t,e){Qe||function(){var t=xt.Promise.resolve(void 0);Qe=function(){t.then(rn)}}(),en||(Qe(),en=!0),nn.add(t,e)}Je.prototype.add=function(t,e){var n=We.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ye.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ye.prototype.reset=function(){this.next=this.b=this.a=null};var en=!1,nn=new Je;function rn(){for(var t;t=$e();){try{t.a.call(t.b)}catch(n){Xe(n)}var e=We;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}en=!1}function on(t,e){He.call(this),this.b=t||1,this.a=e||xt,this.f=Lt(this.eb,this),this.g=Mt()}function sn(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function an(t,e,n){if("function"==typeof t)n&&(t=Lt(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Lt(t.handleEvent,t)}return 2147483647<Number(e)?-1:xt.setTimeout(t,e||0)}function un(t){t.a=an(function(){t.a=null,t.c&&(t.c=!1,un(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}jt(on,He),(St=on.prototype).aa=!1,St.M=null,St.eb=function(){if(this.aa){var t=Mt()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ze(this,"tick"),this.aa&&(sn(this),this.start()))}},St.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Mt())},St.H=function(){on.X.H.call(this),sn(this),delete this.a};var cn=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Tt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:un(this)},e.prototype.H=function(){t.prototype.H.call(this),this.a&&(xt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Ut);function ln(t){Ut.call(this),this.b=t,this.a={}}jt(ln,Ut);var hn=[];function fn(t,e,n,r){Array.isArray(n)||(n&&(hn[0]=n.toString()),n=hn);for(var i=0;i<n.length;i++){var o=Re(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function dn(t){Yt(t.a,function(t,e){this.a.hasOwnProperty(e)&&Fe(t)},t),t.a={}}function pn(){this.a=!0}function yn(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Ze(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}ln.prototype.H=function(){ln.X.H.call(this),dn(this)},ln.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},pn.prototype.info=function(){};var mn={},gn=null;function vn(){return gn=gn||new He}function bn(t){_e.call(this,mn.Ga,t)}function wn(t){var e=vn();ze(e,new bn(e,t))}function _n(t,e){_e.call(this,mn.STAT_EVENT,t),this.stat=e}function En(t){var e=vn();ze(e,new _n(e,t))}function Tn(t){_e.call(this,mn.Ha,t)}function In(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return xt.setTimeout(function(){t()},e)}mn.Ga="serverreachability",jt(bn,_e),mn.STAT_EVENT="statevent",jt(_n,_e),mn.Ha="timingevent",jt(Tn,_e);var Sn={NO_ERROR:0,fb:1,sb:2,rb:3,mb:4,qb:5,tb:6,Ea:7,TIMEOUT:8,wb:9},Cn={kb:"complete",Gb:"success",Fa:"error",Ea:"abort",yb:"ready",zb:"readystatechange",TIMEOUT:"timeout",ub:"incrementaldata",xb:"progress",nb:"downloadprogress",Ob:"uploadprogress"};function An(){}function xn(){}An.prototype.b=null;var kn,Dn={OPEN:"a",jb:"b",Fa:"c",vb:"d"};function Nn(){_e.call(this,"d")}function On(){_e.call(this,"c")}function Rn(){}function Pn(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ln(this),this.P=Vn,this.R=new on(t=ue?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.G=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}jt(Nn,_e),jt(On,_e),jt(Rn,An),Rn.prototype.a=function(){return new XMLHttpRequest},Rn.prototype.c=function(){return{}},kn=new Rn;var Vn=45e3,Ln={},Fn={};function Mn(t,e,n){t.G=1,t.i=sr(tr(e)),t.j=n,t.I=!0,jn(t,null)}function jn(t,e){t.u=Mt(),Bn(t),t.l=tr(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),br(n.b,"t",r),t.D=0,t.a=di(t.g,t.g.C?e:null),0<t.O&&(t.F=new cn(Lt(t.Da,t,t.a),t.O)),fn(t.J,t.a,"readystatechange",t.bb),e=t.B?Xt(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),wn(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function Un(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=qn(t,n);if(i==Fn){4==e&&(t.h=4,En(14),r=!1),yn(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ln){t.h=4,En(15),yn(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}yn(t.c,t.f,i,null),Zn(t,i)}4==e&&0==n.length&&(t.h=1,En(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),oi(e),e.F=!0,En(11))):(yn(t.c,t.f,n,"[Invalid Chunked Response]"),Kn(t),zn(t))}function qn(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Fn:(n=Number(e.substring(n,r)),isNaN(n)?Ln:(r+=1)+n>e.length?Fn:(e=e.substr(r,n),t.D=r+n,e))}function Bn(t){t.T=Mt()+t.P,Gn(t,t.P)}function Gn(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=In(Lt(t.$a,t),e)}function Hn(t){t.o&&(xt.clearTimeout(t.o),t.o=null)}function zn(t){0==t.g.v||t.A||ui(t.g,t)}function Kn(t){Hn(t);var e=t.F;e&&"function"==typeof e.ka&&e.ka(),t.F=null,sn(t.R),dn(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ka())}function Zn(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Cr(n.b,t)))if(n.I=t.N,!t.C&&Cr(n.b,t)&&3==n.v){try{var r=n.la.a.parse(e)}catch(gp){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;ai(n),Wr(n)}ii(n),En(18)}}else n.pa=i[1],0<n.pa-n.P&&37500>i[2]&&n.G&&0==n.o&&!n.m&&(n.m=In(Lt(n.Xa,n),6e3));if(1>=Sr(n.b)&&n.fa){try{n.fa()}catch(gp){}n.fa=void 0}}else li(n,11)}else if((t.C||n.a==t)&&ai(n),!zt(e))for(e=r=n.la.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ha=i[2];var o=i[3];null!=o&&(n.ia=o,n.c.info("VER="+n.ia));var s=i[4];null!=s&&(n.qa=s,n.c.info("SVER="+n.qa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Jt(l,"spdy")||Jt(l,"quic")||Jt(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Ar(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.oa=f,or(u.B,u.A,f))}}n.v=3,n.f&&n.f.ua(),n.U&&(n.N=Mt()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).ma=fi(u,u.C?u.ha:null,u.ga),d.C){xr(u.b,d);var p=d,y=u.D;y&&p.setTimeout(y),p.o&&(Hn(p),Bn(p)),u.a=d}else ri(u);0<n.g.length&&Xr(n)}else"stop"!=i[0]&&"close"!=i[0]||li(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?li(n,7):Qr(n):"noop"!=i[0]&&n.f&&n.f.ta(i),n.o=0);wn(4)}catch(gp){}}function Jn(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Dt(t)||"string"==typeof t)Bt(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Dt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Dt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Qn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qn)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Wn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];$n(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)$n(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function $n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(St=Pn.prototype).setTimeout=function(t){this.P=t},St.bb=function(t){t=t.target;var e=this.F;e&&3==zr(t)?e.f():this.Da(t)},St.Da=function(t){try{if(t==this.a)t:{var e=zr(this.a),n=this.a.va(),r=this.a.W();if(!(3>e||3==e&&!ue&&!this.a.$())){this.A||4!=e||7==n||wn(8==n||0>=r?3:2),Hn(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zt(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,En(12),Kn(this),zn(this);break t}yn(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Zn(this,u)}this.I?(Un(this,e,o),ue&&this.b&&3==e&&(fn(this.J,this.R,"tick",this.ab),this.R.start())):(yn(this.c,this.f,o,null),Zn(this,o)),4==e&&Kn(this),this.b&&!this.A&&(4==e?ui(this.g,this):(this.b=!1,Bn(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,En(12)):(this.h=0,En(13)),Kn(this),zn(this)}}}catch(c){}},St.ab=function(){if(this.a){var t=zr(this.a),e=this.a.$();this.D<e.length&&(Hn(this),Un(this,t,e),this.b&&4!=t&&Bn(this))}},St.cancel=function(){this.A=!0,Kn(this)},St.$a=function(){this.o=null;var t=Mt();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.G&&(wn(3),En(17)),Kn(this),this.h=2,zn(this)):Gn(this,this.T-t)},(St=Qn.prototype).K=function(){Wn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},St.L=function(){return Wn(this),this.a.concat()},St.get=function(t,e){return $n(this.b,t)?this.b[t]:e},St.set=function(t,e){$n(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},St.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Yn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xn(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Xn){this.a=void 0!==e?e:t.a,er(this,t.f),this.j=t.j,nr(this,t.c),rr(this,t.h),this.g=t.g,e=t.b;var n=new yr;n.c=e.c,e.a&&(n.a=new Qn(e.a),n.b=e.b),ir(this,n),this.i=t.i}else t&&(n=String(t).match(Yn))?(this.a=!!e,er(this,n[1]||"",!0),this.j=ar(n[2]||""),nr(this,n[3]||"",!0),rr(this,n[4]),this.g=ar(n[5]||"",!0),ir(this,n[6]||"",!0),this.i=ar(n[7]||"")):(this.a=!!e,this.b=new yr(null,this.a))}function tr(t){return new Xn(t)}function er(t,e,n){t.f=n?ar(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function nr(t,e,n){t.c=n?ar(e,!0):e}function rr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function ir(t,e,n){e instanceof yr?(t.b=e,function(t,e){e&&!t.f&&(mr(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(gr(this,e),br(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=ur(e,dr)),t.b=new yr(e,t.a))}function or(t,e,n){t.b.set(e,n)}function sr(t){return or(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Mt()).toString(36)),t}function ar(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ur(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,cr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function cr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Xn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ur(e,lr,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ur(e,lr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ur(n,"/"==n.charAt(0)?fr:hr,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ur(n,pr)),t.join("")};var lr=/[#\/\?@]/g,hr=/[#\?:]/g,fr=/[#\?]/g,dr=/[#\?@]/g,pr=/#/g;function yr(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function mr(t){t.a||(t.a=new Qn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function gr(t,e){mr(t),e=wr(t,e),$n(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,$n((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Wn(t)))}function vr(t,e){return mr(t),e=wr(t,e),$n(t.a.b,e)}function br(t,e,n){gr(t,e),0<n.length&&(t.c=null,t.a.set(wr(t,e),Ht(n)),t.b+=n.length)}function wr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(St=yr.prototype).add=function(t,e){mr(this),this.c=null,t=wr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},St.forEach=function(t,e){mr(this),this.a.forEach(function(n,r){Bt(n,function(n){t.call(e,n,r,this)},this)},this)},St.L=function(){mr(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},St.K=function(t){mr(this);var e=[];if("string"==typeof t)vr(this,t)&&(e=Gt(e,this.a.get(wr(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Gt(e,t[n])}return e},St.set=function(t,e){return mr(this),this.c=null,vr(this,t=wr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},St.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},St.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var _r=function(){return function(t,e){this.b=t,this.a=e}}();function Er(t){this.g=t||Tr,t=xt.PerformanceNavigationTiming?0<(t=xt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(xt.ja&&xt.ja.za&&xt.ja.za()&&xt.ja.za().Qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Tr=10;function Ir(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Sr(t){return t.b?1:t.a?t.a.size:0}function Cr(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Ar(t,e){t.a?t.a.add(e):t.b=e}function xr(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function kr(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=It(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Ht(t.c)}function Dr(){}function Nr(){this.a=new Dr}function Or(t,e,n){var r=n||"";try{Jn(t,function(t,n){var i=t;Nt(t)&&(i=Ze(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(qp){throw e.push(r+"type="+encodeURIComponent("_badmap")),qp}}function Rr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Er.prototype.cancel=function(){var t,e;if(this.c=kr(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=It(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Dr.prototype.stringify=function(t){return xt.JSON.stringify(t,void 0)},Dr.prototype.parse=function(t){return xt.JSON.parse(t,void 0)};var Pr=xt.JSON.parse;function Vr(t){He.call(this),this.headers=new Qn,this.l=t||null,this.b=!1,this.u=this.a=null,this.C="",this.h=0,this.f="",this.g=this.B=this.m=this.A=!1,this.s=0,this.o=null,this.I=Lr,this.F=this.G=!1}jt(Vr,He);var Lr="",Fr=/^https?$/i,Mr=["POST","PUT"];function jr(t){return"content-type"==t.toLowerCase()}function Ur(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,qr(t),Gr(t)}function qr(t){t.A||(t.A=!0,ze(t,"complete"),ze(t,"error"))}function Br(t){if(t.b&&void 0!==At&&(!t.u[1]||4!=zr(t)||2!=t.W()))if(t.m&&4==zr(t))an(t.Aa,0,t);else if(ze(t,"readystatechange"),4==zr(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.C).match(Yn)[1]||null;if(!o&&xt.self&&xt.self.location){var s=xt.self.location.protocol;o=s.substr(0,s.length-1)}i=!Fr.test(o?o.toLowerCase():"")}e=i}if(e)ze(t,"complete"),ze(t,"success");else{t.h=6;try{var a=2<zr(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",qr(t)}}finally{Gr(t)}}}function Gr(t,e){if(t.a){Hr(t);var n=t.a,r=t.u[0]?kt:null;t.a=null,t.u=null,e||ze(t,"ready");try{n.onreadystatechange=r}catch(qp){}}}function Hr(t){t.a&&t.F&&(t.a.ontimeout=null),t.o&&(xt.clearTimeout(t.o),t.o=null)}function zr(t){return t.a?t.a.readyState:0}function Kr(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Yt(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):or(t,e,n))}function Zr(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Jr(t){this.qa=0,this.g=[],this.c=new pn,this.ha=this.ma=this.B=this.ga=this.a=this.oa=this.A=this.V=this.i=this.O=this.l=null,this.Pa=this.R=0,this.Ma=Zr("failFast",!1,t),this.G=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.pa=this.P=-1,this.T=this.o=this.u=0,this.Ia=Zr("baseRetryDelayMs",5e3,t),this.Sa=Zr("retryDelaySeedMs",1e4,t),this.Na=Zr("forwardChannelMaxRetries",2,t),this.na=Zr("forwardChannelRequestTimeoutMs",2e4,t),this.Oa=t&&t.xmlHttpFactory||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Er(t&&t.concurrentRequestLimit),this.la=new Nr,this.ea=t&&t.fastHandshake||!1,this.Ja=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.ea&&this.S&&t&&t.detectBufferingProxy||!1,this.fa=void 0,this.N=0,this.F=!1,this.s=null,(this.La=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Qr(t){if($r(t),3==t.v){var e=t.R++,n=tr(t.B);or(n,"SID",t.J),or(n,"RID",e),or(n,"TYPE","terminate"),ei(t,n),(e=new Pn(t,t.c,e,void 0)).G=2,e.i=sr(tr(n)),n=!1,xt.navigator&&xt.navigator.sendBeacon&&(n=xt.navigator.sendBeacon(e.i.toString(),"")),!n&&xt.Image&&((new Image).src=e.i,n=!0),n||(e.a=di(e.g,null),e.a.ba(e.i)),e.u=Mt(),Bn(e)}hi(t)}function Wr(t){t.a&&(oi(t),t.a.cancel(),t.a=null)}function $r(t){Wr(t),t.j&&(xt.clearTimeout(t.j),t.j=null),ai(t),t.b.cancel(),t.h&&("number"==typeof t.h&&xt.clearTimeout(t.h),t.h=null)}function Yr(t,e){t.g.push(new _r(t.Pa++,e)),3==t.v&&Xr(t)}function Xr(t){Ir(t.b)||t.h||(t.h=!0,tn(t.Ca,t),t.u=0)}function ti(t,e){var n;n=e?e.f:t.R++;var r=tr(t.B);or(r,"SID",t.J),or(r,"RID",n),or(r,"AID",t.P),ei(t,r),t.i&&t.l&&Kr(r,t.i,t.l),n=new Pn(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ni(t,n,1e3),n.setTimeout(Math.round(.5*t.na)+Math.round(.5*t.na*Math.random())),Ar(t.b,n),Mn(n,r,e)}function ei(t,e){t.f&&Jn({},function(t,n){or(e,n,t)})}function ni(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Lt(t.f.Ka,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Or(l,s,"req"+c+"_")}catch(Wi){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function ri(t){t.a||t.j||(t.T=1,tn(t.Ba,t),t.o=0)}function ii(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=In(Lt(t.Ba,t),ci(t,t.o)),t.o++,0))}function oi(t){null!=t.s&&(xt.clearTimeout(t.s),t.s=null)}function si(t){t.a=new Pn(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=tr(t.ma);or(e,"RID","rpc"),or(e,"SID",t.J),or(e,"CI",t.G?"0":"1"),or(e,"AID",t.P),ei(t,e),or(e,"TYPE","xmlhttp"),t.i&&t.l&&Kr(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ha,n.G=1,n.i=sr(tr(e)),n.j=null,n.I=!0,jn(n,t)}function ai(t){null!=t.m&&(xt.clearTimeout(t.m),t.m=null)}function ui(t,e){var n=null;if(t.a==e){ai(t),oi(t),t.a=null;var r=2}else{if(!Cr(t.b,e))return;n=e.s,xr(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Mt()-e.u;var i=t.u;ze(r=vn(),new Tn(r,n,e,i)),Xr(t)}else ri(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Sr(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ma?0:t.Na)||(t.h=In(Lt(t.Ca,t,e),ci(t,t.u)),t.u++,0)))}(t,e)||2==r&&ii(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:li(t,5);break;case 4:li(t,10);break;case 3:li(t,6);break;default:li(t,2)}}function ci(t,e){var n=t.Ia+Math.floor(Math.random()*t.Sa);return t.f||(n*=2),n*e}function li(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Lt(t.cb,t);n||(n=new Xn("//www.google.com/images/cleardot.gif"),xt.location&&"http"==xt.location.protocol||er(n,"https"),sr(n)),function(t,e){var n=new pn;if(xt.Image){var r=new Image;r.onload=Ft(Rr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ft(Rr,n,r,"TestLoadImage: error",!1,e),r.onabort=Ft(Rr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ft(Rr,n,r,"TestLoadImage: timeout",!1,e),xt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else En(2);t.v=0,t.f&&t.f.sa(e),hi(t),$r(t)}function hi(t){t.v=0,t.I=-1,t.f&&(0==kr(t.b).length&&0==t.g.length||(t.b.c.length=0,Ht(t.g),t.g.length=0),t.f.ra())}function fi(t,e,n){var r=function(t){return t instanceof Xn?tr(t):new Xn(t,void 0)}(n);if(""!=r.c)e&&nr(r,e+"."+r.c),rr(r,r.h);else{var i=xt.location;r=function(t,e,n,r){var i=new Xn(null,void 0);return t&&er(i,t),e&&nr(i,e),n&&rr(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Yt(t.V,function(t,e){or(r,e,t)}),n=t.oa,(e=t.A)&&n&&or(r,e,n),or(r,"VER",t.ia),ei(t,r),r}function di(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Vr(t.Oa)).G=t.C,e}function pi(){}function yi(){if(se&&!(10<=Number(ge)))throw Error("Environmental error: no available transport.")}function mi(t,e){He.call(this),this.a=new Jr(e),this.g=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!zt(t)&&(this.a.i=t),this.o=e&&e.supportsCrossDomainXhr||!1,this.m=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zt(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new bi(this)}function gi(t){Nn.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function vi(){On.call(this),this.status=1}function bi(t){this.a=t}function wi(t){this.f=t}function _i(t){He.call(this),this.u=t,this.h=void 0,this.readyState=Ei,this.status=0,this.responseType=this.responseText=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.o="",this.a=!1,this.m=this.f=this.g=null}(St=Vr.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.C+"; newUri="+t);e=e?e.toUpperCase():"GET",this.C=t,this.f="",this.h=0,this.A=!1,this.b=!0,this.a=this.l?this.l.a():kn.a(),this.u=function(t){return t.b||(t.b=t.c())}(this.l?this.l:kn),this.a.onreadystatechange=Lt(this.Aa,this);try{this.B=!0,this.a.open(e,String(t),!0),this.B=!1}catch(o){return void Ur(this,o)}t=n||"";var i=new Qn(this.headers);r&&Jn(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=jr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=xt.FormData&&t instanceof xt.FormData,!(0<=qt(Mr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.G&&(this.a.withCredentials=this.G);try{Hr(this),0<this.s&&((this.F=function(t){return se&&me(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.s,this.a.ontimeout=Lt(this.ya,this)):this.o=an(this.ya,this.s,this)),this.m=!0,this.a.send(t),this.m=!1}catch(o){Ur(this,o)}},St.ya=function(){void 0!==At&&this.a&&(this.f="Timed out after "+this.s+"ms, aborting",this.h=8,ze(this,"timeout"),this.abort(8))},St.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ze(this,"complete"),ze(this,"abort"),Gr(this))},St.H=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Gr(this,!0)),Vr.X.H.call(this)},St.Aa=function(){this.j||(this.B||this.m||this.g?Br(this):this.Za())},St.Za=function(){Br(this)},St.W=function(){try{return 2<zr(this)?this.a.status:-1}catch(ie){return-1}},St.$=function(){try{return this.a?this.a.responseText:""}catch(ie){return""}},St.Qa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Pr(e)}},St.va=function(){return this.h},St.Ra=function(){return"string"==typeof this.f?this.f:String(this.f)},(St=Jr.prototype).ia=8,St.v=1,St.Ca=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Pn(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ee(r=Xt(r),this.O):r=this.O),null===this.i&&(n.B=r),this.ea)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ni(this,n,e),or(i=tr(this.B),"RID",t),or(i,"CVER",22),this.A&&or(i,"X-HTTP-Session-Id",this.A),ei(this,i),this.i&&r&&Kr(i,this.i,r),Ar(this.b,n),this.Ja&&or(i,"TYPE","init"),this.ea?(or(i,"$req",e),or(i,"SID","null"),n.U=!0,Mn(n,i,null)):Mn(n,i,e),this.v=2}}else 3==this.v&&(t?ti(this,t):0==this.g.length||Ir(this.b)||ti(this))},St.Ba=function(){if(this.j=null,si(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=In(Lt(this.Ya,this),t)}},St.Ya=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.F=!0,En(10),Wr(this),si(this))},St.Xa=function(){null!=this.m&&(this.m=null,Wr(this),ii(this),En(19))},St.cb=function(t){t?(this.c.info("Successfully pinged google.com"),En(2)):(this.c.info("Failed to ping google.com"),En(1))},(St=pi.prototype).ua=function(){},St.ta=function(){},St.sa=function(){},St.ra=function(){},St.Ka=function(){},yi.prototype.a=function(t,e){return new mi(t,e)},jt(mi,He),mi.prototype.h=function(){this.a.f=this.f,this.o&&(this.a.C=!0);var t=this.a,e=this.g,n=this.b||void 0;En(0),t.ga=e,t.V=n||{},t.G=t.S,t.B=fi(t,null,t.ga),Xr(t)},mi.prototype.close=function(){Qr(this.a)},mi.prototype.l=function(t){if("string"==typeof t){var e={};e.__data__=t,Yr(this.a,e)}else this.m?((e={}).__data__=Ze(t),Yr(this.a,e)):Yr(this.a,t)},mi.prototype.H=function(){this.a.f=null,delete this.f,Qr(this.a),delete this.a,mi.X.H.call(this)},jt(gi,Nn),jt(vi,On),jt(bi,pi),bi.prototype.ua=function(){ze(this.a,"a")},bi.prototype.ta=function(t){ze(this.a,new gi(t))},bi.prototype.sa=function(t){ze(this.a,new vi(t))},bi.prototype.ra=function(){ze(this.a,"b")},jt(wi,An),wi.prototype.a=function(){return new _i(this.f)},wi.prototype.c=function(t){return function(){return t}}({}),jt(_i,He);var Ei=0;function Ti(t){t.f.read().then(t.Ta.bind(t)).catch(t.ca.bind(t))}function Ii(t){t.readyState=4,t.g=null,t.f=null,t.m=null,Si(t)}function Si(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(St=_i.prototype).open=function(t,e){if(this.readyState!=Ei)throw this.abort(),Error("Error reopening a connection");this.s=t,this.o=e,this.readyState=1,Si(this)},St.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.o,e)).then(this.Wa.bind(this),this.ca.bind(this))},St.abort=function(){this.responseText="",this.l=new Headers,this.status=0,this.f&&this.f.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ii(this)),this.readyState=Ei},St.Wa=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,Si(this)),this.a&&(this.readyState=3,Si(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.Ua.bind(this),this.ca.bind(this)):void 0!==xt.ReadableStream&&"body"in t?(this.responseText="",this.f=t.body.getReader(),this.m=new TextDecoder,Ti(this)):t.text().then(this.Va.bind(this),this.ca.bind(this)))))},St.Ta=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.responseText+=e),t.done?Ii(this):Si(this),3==this.readyState&&Ti(this)}},St.Va=function(t){this.a&&(this.responseText=t,Ii(this))},St.Ua=function(){this.a&&Ii(this)},St.ca=function(){this.a&&Ii(this)},St.setRequestHeader=function(t,e){this.l.append(t,e)},St.getResponseHeader=function(t){return this.b&&this.b.get(t.toLowerCase())||""},St.getAllResponseHeaders=function(){if(!this.b)return"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(_i.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),yi.prototype.createWebChannel=yi.prototype.a,mi.prototype.send=mi.prototype.l,mi.prototype.open=mi.prototype.h,mi.prototype.close=mi.prototype.close,Sn.NO_ERROR=0,Sn.TIMEOUT=8,Sn.HTTP_ERROR=6,Cn.COMPLETE="complete",xn.EventType=Dn,Dn.OPEN="a",Dn.CLOSE="b",Dn.ERROR="c",Dn.MESSAGE="d",He.prototype.listen=He.prototype.wa,Vr.prototype.listenOnce=Vr.prototype.xa,Vr.prototype.getLastError=Vr.prototype.Ra,Vr.prototype.getLastErrorCode=Vr.prototype.va,Vr.prototype.getStatus=Vr.prototype.W,Vr.prototype.getResponseJson=Vr.prototype.Qa,Vr.prototype.getResponseText=Vr.prototype.$,Vr.prototype.send=Vr.prototype.ba;var Ci=Sn,Ai=Cn,xi=mn,ki=wi,Di=xn,Ni=Vr,Oi=n(4762),Ri=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ri.o=-1;var Pi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,Oi.ZT)(e,t),e}(Error),Li=new Et.Yd("@firebase/firestore");function Fi(){return Li.logLevel}function Mi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Li.logLevel<=Et.in.DEBUG){var r=e.map(qi);Li.debug.apply(Li,(0,Oi.ev)(["Firestore (8.6.8): "+t],r))}}function ji(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Li.logLevel<=Et.in.ERROR){var r=e.map(qi);Li.error.apply(Li,(0,Oi.ev)(["Firestore (8.6.8): "+t],r))}}function Ui(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Li.logLevel<=Et.in.WARN){var r=e.map(qi);Li.warn.apply(Li,(0,Oi.ev)(["Firestore (8.6.8): "+t],r))}}function qi(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(qp){return t}}function Bi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.8) INTERNAL ASSERTION FAILED: "+t;throw ji(e),new Error(e)}function Gi(t,e){t||Bi()}function Hi(t,e){return t}function zi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Ki=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=zi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Zi(t,e){return t<e?-1:t>e?1:0}function Ji(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Qi(t){return t+"\0"}var Wi=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Vi(Pi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Vi(Pi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Vi(Pi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vi(Pi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Zi(this.nanoseconds,t.nanoseconds):Zi(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),$i=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Wi(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Yi(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Xi(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function to(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var eo=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Bi(),void 0===n?n=t.length-e:n>t.length-e&&Bi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),no=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Oi.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(eo),ro=/^[_a-zA-Z][_a-zA-Z0-9]*$/,io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Oi.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ro.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Vi(Pi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Vi(Pi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Vi(Pi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(eo),oo=function(){function t(t){this.fields=t,t.sort(io.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Ji(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),so=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Zi(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();so.EMPTY_BYTE_STRING=new so("");var ao=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(t){if(Gi(!!t),"string"==typeof t){var e=0,n=ao.exec(t);if(Gi(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:co(t.seconds),nanos:co(t.nanos)}}function co(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function lo(t){return"string"==typeof t?so.fromBase64String(t):so.fromUint8Array(t)}function ho(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function fo(t){var e=t.mapValue.fields.__previous_value__;return ho(e)?fo(e):e}function po(t){var e=uo(t.mapValue.fields.__local_write_time__.timestampValue);return new Wi(e.seconds,e.nanos)}function yo(t){return null==t}function mo(t){return 0===t&&1/t==-1/0}function go(t){return"number"==typeof t&&Number.isInteger(t)&&!mo(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var vo=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(no.fromString(e))},t.fromName=function(e){return new t(no.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===no.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return no.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new no(e.slice()))},t}();function bo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ho(t)?4:10:Bi()}function wo(t,e){var n=bo(t);if(n!==bo(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return po(t).isEqual(po(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=uo(t.timestampValue),r=uo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return lo(t.bytesValue).isEqual(lo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return co(t.geoPointValue.latitude)===co(e.geoPointValue.latitude)&&co(t.geoPointValue.longitude)===co(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return co(t.integerValue)===co(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=co(t.doubleValue),r=co(e.doubleValue);return n===r?mo(n)===mo(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ji(t.arrayValue.values||[],e.arrayValue.values||[],wo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Yi(n)!==Yi(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!wo(n[i],r[i])))return!1;return!0}(t,e);default:return Bi()}}function _o(t,e){return void 0!==(t.values||[]).find(function(t){return wo(t,e)})}function Eo(t,e){var n=bo(t),r=bo(e);if(n!==r)return Zi(n,r);switch(n){case 0:return 0;case 1:return Zi(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=co(t.integerValue||t.doubleValue),r=co(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return To(t.timestampValue,e.timestampValue);case 4:return To(po(t),po(e));case 5:return Zi(t.stringValue,e.stringValue);case 6:return function(t,e){var n=lo(t),r=lo(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Zi(n[i],r[i]);if(0!==o)return o}return Zi(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Zi(co(t.latitude),co(e.latitude));return 0!==n?n:Zi(co(t.longitude),co(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Eo(n[i],r[i]);if(o)return o}return Zi(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Zi(r[s],o[s]);if(0!==a)return a;var u=Eo(n[r[s]],i[o[s]]);if(0!==u)return u}return Zi(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Bi()}}function To(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Zi(t,e);var n=uo(t),r=uo(e),i=Zi(n.seconds,r.seconds);return 0!==i?i:Zi(n.nanos,r.nanos)}function Io(t){return So(t)}function So(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=uo(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?lo(t.bytesValue).toBase64():"referenceValue"in t?vo.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=So(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+So(t.fields[o])}return e+"}"}(t.mapValue):Bi();var e}function Co(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ao(t){return!!t&&"integerValue"in t}function xo(t){return!!t&&"arrayValue"in t}function ko(t){return!!t&&"nullValue"in t}function Do(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function No(t){return!!t&&"mapValue"in t}function Oo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},uo(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Xi(t.mapValue.fields,function(t,n){return e.mapValue.fields[t]=Oo(n)}),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Oo(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Ro=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!No(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Oo(e)},t.prototype.setAll=function(t){var e=this,n=io.emptyPath(),r={},i=[];t.forEach(function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Oo(t):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());No(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return wo(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];No(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Xi(e,function(e,n){return t[e]=n});for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Oo(this.value))},t}();function Po(t){var e=[];return Xi(t.fields,function(t,n){var r=new io([t]);if(No(n)){var i=Po(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new oo(e)}var Vo=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,$i.min(),Ro.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Ro.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Ro.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Ro.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Ro.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Lo=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Fo(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Lo(t,e,n,r,i,o,s)}function Mo(t){var e=Hi(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Io(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),yo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=$o(e.startAt)),e.endAt&&(n+="|ub:",n+=$o(e.endAt)),e.h=n}return e.h}function jo(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Xo(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!wo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!es(t.startAt,e.startAt)&&es(t.endAt,e.endAt)}function Uo(t){return vo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var qo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,Oi.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Bo(t,n,r):"array-contains"===n?new Ko(t,r):"in"===n?new Zo(t,r):"not-in"===n?new Jo(t,r):"array-contains-any"===n?new Qo(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Go(t,n):new Ho(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Eo(e,this.value)):null!==e&&bo(this.value)===bo(e)&&this.m(Eo(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Bi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Bo=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=vo.fromName(r.referenceValue),i}return(0,Oi.ZT)(e,t),e.prototype.matches=function(t){var e=vo.comparator(t.key,this.key);return this.m(e)},e}(qo),Go=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=zo(0,n),r}return(0,Oi.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(qo),Ho=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=zo(0,n),r}return(0,Oi.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(qo);function zo(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return vo.fromName(t.referenceValue)})}var Ko=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,Oi.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return xo(e)&&_o(e.arrayValue,this.value)},e}(qo),Zo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,Oi.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&_o(this.value.arrayValue,e)},e}(qo),Jo=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,Oi.ZT)(e,t),e.prototype.matches=function(t){if(_o(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!_o(this.value.arrayValue,e)},e}(qo),Qo=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,Oi.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!xo(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return _o(e.value.arrayValue,t)})},e}(qo),Wo=function(t,e){this.position=t,this.before=e};function $o(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Io(t)}).join(",")}var Yo=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Xo(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ts(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?vo.comparator(vo.fromName(s.referenceValue),n.key):Eo(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function es(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!wo(t.position[n],e.position[n]))return!1;return!0}var ns=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function rs(t,e,n,r,i,o,s,a){return new ns(t,e,n,r,i,o,s,a)}function is(t){return new ns(t)}function os(t){return!yo(t.limit)&&"F"===t.limitType}function ss(t){return!yo(t.limit)&&"L"===t.limitType}function as(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function us(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function cs(t){return null!==t.collectionGroup}function ls(t){var e=Hi(t);if(null===e.p){e.p=[];var n=us(e),r=as(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Yo(n)),e.p.push(new Yo(io.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Yo(io.keyField(),u))}}}return e.p}function hs(t){var e=Hi(t);if(!e.T)if("F"===e.limitType)e.T=Fo(e.path,e.collectionGroup,ls(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ls(e);r<i.length;r++){var o=i[r];n.push(new Yo(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Wo(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Wo(e.startAt.position,!e.startAt.before):null;e.T=Fo(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function fs(t,e,n){return new ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ds(t,e){return jo(hs(t),hs(e))&&t.limitType===e.limitType}function ps(t){return Mo(hs(t))+"|lt:"+t.limitType}function ys(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Io(e.value);var e}).join(", ")+"]"),yo(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+$o(t.startAt)),t.endAt&&(e+=", endAt: "+$o(t.endAt)),"Target("+e+")"}(hs(t))+"; limitType="+t.limitType+")"}function ms(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):vo.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ts(t.startAt,ls(t),e)||t.endAt&&ts(t.endAt,ls(t),e))}(t,e)}function gs(t){return function(e,n){for(var r=!1,i=0,o=ls(t);i<o.length;i++){var s=o[i],a=vs(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function vs(t,e,n){var r=t.field.isKeyField()?vo.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Eo(r,i):Bi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Bi()}}function bs(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mo(e)?"-0":e}}function ws(t){return{integerValue:""+t}}function _s(t,e){return go(e)?ws(e):bs(t,e)}var Es=function(){this._=void 0};function Ts(t,e,n){return t instanceof Cs?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof As?xs(t,e):t instanceof ks?Ds(t,e):function(t,e){var n=Ss(t,e),r=Os(n)+Os(t.A);return Ao(n)&&Ao(t.A)?ws(r):bs(t.R,r)}(t,e)}function Is(t,e,n){return t instanceof As?xs(t,e):t instanceof ks?Ds(t,e):n}function Ss(t,e){return t instanceof Ns?Ao(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Cs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Oi.ZT)(e,t),e}(Es),As=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Oi.ZT)(e,t),e}(Es);function xs(t,e){for(var n=Rs(e),r=function(t){n.some(function(e){return wo(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ks=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,Oi.ZT)(e,t),e}(Es);function Ds(t,e){for(var n=Rs(e),r=function(t){n=n.filter(function(e){return!wo(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ns=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,Oi.ZT)(e,t),e}(Es);function Os(t){return co(t.integerValue||t.doubleValue)}function Rs(t){return xo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Ps=function(t,e){this.field=t,this.transform=e},Vs=function(t,e){this.version=t,this.transformResults=e},Ls=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Fs(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ms=function(){};function js(t,e,n){t instanceof Hs?function(t,e,n){var r=t.value.clone(),i=Zs(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof zs?function(t,e,n){if(Fs(t.precondition,e)){var r=Zs(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ks(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Us(t,e,n){t instanceof Hs?function(t,e,n){if(Fs(t.precondition,e)){var r=t.value.clone(),i=Js(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Gs(e),r).setHasLocalMutations()}}(t,e,n):t instanceof zs?function(t,e,n){if(Fs(t.precondition,e)){var r=Js(t.fieldTransforms,n,e),i=e.data;i.setAll(Ks(t)),i.setAll(r),e.convertToFoundDocument(Gs(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Fs(t.precondition,e)&&e.convertToNoDocument($i.min())}(t,e)}function qs(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Ss(o.transform,s||null);null!=a&&(null==n&&(n=Ro.empty()),n.set(o.field,a))}return n||null}function Bs(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ji(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof As&&e instanceof As||t instanceof ks&&e instanceof ks?Ji(t.elements,e.elements,wo):t instanceof Ns&&e instanceof Ns?wo(t.A,e.A):t instanceof Cs&&e instanceof Cs}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Gs(t){return t.isFoundDocument()?t.version:$i.min()}var Hs=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,Oi.ZT)(e,t),e}(Ms),zs=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,Oi.ZT)(e,t),e}(Ms);function Ks(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function Zs(t,e,n){var r=new Map;Gi(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Is(s,a,n[i]))}return r}function Js(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Ts(a,u,e))}return r}var Qs,Ws,$s=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,Oi.ZT)(e,t),e}(Ms),Ys=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,Oi.ZT)(e,t),e}(Ms),Xs=function(t){this.count=t};function ta(t){switch(t){case Pi.OK:return Bi();case Pi.CANCELLED:case Pi.UNKNOWN:case Pi.DEADLINE_EXCEEDED:case Pi.RESOURCE_EXHAUSTED:case Pi.INTERNAL:case Pi.UNAVAILABLE:case Pi.UNAUTHENTICATED:return!1;case Pi.INVALID_ARGUMENT:case Pi.NOT_FOUND:case Pi.ALREADY_EXISTS:case Pi.PERMISSION_DENIED:case Pi.FAILED_PRECONDITION:case Pi.ABORTED:case Pi.OUT_OF_RANGE:case Pi.UNIMPLEMENTED:case Pi.DATA_LOSS:return!0;default:return Bi()}}function ea(t){if(void 0===t)return ji("GRPC error has no .code"),Pi.UNKNOWN;switch(t){case Qs.OK:return Pi.OK;case Qs.CANCELLED:return Pi.CANCELLED;case Qs.UNKNOWN:return Pi.UNKNOWN;case Qs.DEADLINE_EXCEEDED:return Pi.DEADLINE_EXCEEDED;case Qs.RESOURCE_EXHAUSTED:return Pi.RESOURCE_EXHAUSTED;case Qs.INTERNAL:return Pi.INTERNAL;case Qs.UNAVAILABLE:return Pi.UNAVAILABLE;case Qs.UNAUTHENTICATED:return Pi.UNAUTHENTICATED;case Qs.INVALID_ARGUMENT:return Pi.INVALID_ARGUMENT;case Qs.NOT_FOUND:return Pi.NOT_FOUND;case Qs.ALREADY_EXISTS:return Pi.ALREADY_EXISTS;case Qs.PERMISSION_DENIED:return Pi.PERMISSION_DENIED;case Qs.FAILED_PRECONDITION:return Pi.FAILED_PRECONDITION;case Qs.ABORTED:return Pi.ABORTED;case Qs.OUT_OF_RANGE:return Pi.OUT_OF_RANGE;case Qs.UNIMPLEMENTED:return Pi.UNIMPLEMENTED;case Qs.DATA_LOSS:return Pi.DATA_LOSS;default:return Bi()}}(Ws=Qs||(Qs={}))[Ws.OK=0]="OK",Ws[Ws.CANCELLED=1]="CANCELLED",Ws[Ws.UNKNOWN=2]="UNKNOWN",Ws[Ws.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ws[Ws.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ws[Ws.NOT_FOUND=5]="NOT_FOUND",Ws[Ws.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ws[Ws.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ws[Ws.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ws[Ws.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ws[Ws.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ws[Ws.ABORTED=10]="ABORTED",Ws[Ws.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ws[Ws.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ws[Ws.INTERNAL=13]="INTERNAL",Ws[Ws.UNAVAILABLE=14]="UNAVAILABLE",Ws[Ws.DATA_LOSS=15]="DATA_LOSS";var na=function(){function t(t,e){this.comparator=t,this.root=e||ia.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ia.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ia.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new ra(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new ra(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new ra(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new ra(this.root,t,this.comparator,!0)},t}(),ra=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ia=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Bi();if(this.right.isRed())throw Bi();var t=this.left.check();if(t!==this.right.check())throw Bi();return t+(this.isRed()?0:1)},t}();ia.EMPTY=null,ia.RED=!0,ia.BLACK=!1,ia.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Bi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Bi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Bi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Bi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Bi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ia(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var oa=function(){function t(t){this.comparator=t,this.data=new na(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new sa(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new sa(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),sa=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),aa=new na(vo.comparator);function ua(){return aa}var ca=new na(vo.comparator);function la(){return ca}var ha=new na(vo.comparator);function fa(){return ha}var da=new oa(vo.comparator);function pa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=da,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ya=new oa(Zi);function ma(){return ya}var ga=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,va.createSynthesizedTargetChangeForCurrentChange(e,n)),new t($i.min(),r,ma(),ua(),pa())},t}(),va=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(so.EMPTY_BYTE_STRING,n,pa(),pa(),pa())},t}(),ba=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},wa=function(t,e){this.targetId=t,this.V=e},_a=function(t,e,n,r){void 0===n&&(n=so.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ea=function(){function t(){this.S=0,this.D=Sa(),this.C=so.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=pa(),e=pa(),n=pa();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Bi()}}),new va(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Sa()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Ta=function(){function t(t){this.W=t,this.G=new Map,this.H=ua(),this.J=Ia(),this.Y=new oa(Zi)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Bi()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Uo(i))if(0===n){var o=new vo(i.path);this.tt(e,o,Vo.newNoDocument(o,$i.min()))}else Gi(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Uo(o.target)){var s=new vo(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Vo.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}});var r=pa();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new ga(t,n,this.Y,this.H,r);return this.H=ua(),this.J=Ia(),this.Y=new oa(Zi),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ea,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new oa(Zi),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Mi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ea),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ia(){return new na(vo.comparator)}function Sa(){return new na(vo.comparator)}var Ca={asc:"ASCENDING",desc:"DESCENDING"},Aa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xa=function(t,e){this.databaseId=t,this.I=e};function ka(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Da(t,e){return t.I?e.toBase64():e.toUint8Array()}function Na(t,e){return ka(t,e.toTimestamp())}function Oa(t){return Gi(!!t),$i.fromTimestamp(function(t){var e=uo(t);return new Wi(e.seconds,e.nanos)}(t))}function Ra(t,e){return function(t){return new no(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Pa(t){var e=no.fromString(t);return Gi(iu(e)),e}function Va(t,e){return Ra(t.databaseId,e.path)}function La(t,e){var n=Pa(e);if(n.get(1)!==t.databaseId.projectId)throw new Vi(Pi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Vi(Pi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new vo(Ua(n))}function Fa(t,e){return Ra(t.databaseId,e)}function Ma(t){var e=Pa(t);return 4===e.length?no.emptyPath():Ua(e)}function ja(t){return new no(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ua(t){return Gi(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function qa(t,e,n){return{name:Va(t,e),fields:n.value.mapValue.fields}}function Ba(t,e,n){var r=La(t,e.name),i=Oa(e.updateTime),o=new Ro({mapValue:{fields:e.fields}}),s=Vo.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Ga(t,e){var n;if(e instanceof Hs)n={update:qa(t,e.key,e.value)};else if(e instanceof $s)n={delete:Va(t,e.key)};else if(e instanceof zs)n={update:qa(t,e.key,e.data),updateMask:ru(e.fieldMask)};else{if(!(e instanceof Ys))return Bi();n={verify:Va(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Cs)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof As)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ks)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ns)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Bi()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Na(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Bi()}(t,e.precondition)),n}function Ha(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ls.updateTime(Oa(t.updateTime)):void 0!==t.exists?Ls.exists(t.exists):Ls.none()}(e.currentDocument):Ls.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Gi("REQUEST_TIME"===e.setToServerValue),n=new Cs):"appendMissingElements"in e?n=new As(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new ks(e.removeAllFromArray.values||[]):"increment"in e?n=new Ns(t,e.increment):Bi();var r=io.fromServerFormat(e.fieldPath);return new Ps(r,n)}(t,e)}):[];if(e.update){var i=La(t,e.update.name),o=new Ro({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new oo((t.fieldPaths||[]).map(function(t){return io.fromServerFormat(t)}))}(e.updateMask);return new zs(i,o,s,n,r)}return new Hs(i,o,n,r)}if(e.delete){var a=La(t,e.delete);return new $s(a,n)}if(e.verify){var u=La(t,e.verify);return new Ys(u,n)}return Bi()}function za(t,e){return{documents:[Fa(t,e.path)]}}function Ka(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Fa(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Fa(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Do(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NAN"}};if(ko(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Do(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NOT_NAN"}};if(ko(t.value))return{unaryFilter:{field:Xa(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xa(t.field),op:Ya(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Xa(t.field),direction:$a(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||yo(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Qa(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Qa(e.endAt)),n}function Za(t){var e=Ma(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Gi(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ja(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Yo(tu(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return yo(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Wa(n.startAt));var l=null;return n.endAt&&(l=Wa(n.endAt)),rs(e,i,a,s,u,"F",c,l)}function Ja(t){return t?void 0!==t.unaryFilter?[nu(t)]:void 0!==t.fieldFilter?[eu(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Ja(t)}).reduce(function(t,e){return t.concat(e)}):Bi():[]}function Qa(t){return{before:t.before,values:t.position}}function Wa(t){return new Wo(t.values||[],!!t.before)}function $a(t){return Ca[t]}function Ya(t){return Aa[t]}function Xa(t){return{fieldPath:t.canonicalString()}}function tu(t){return io.fromServerFormat(t.fieldPath)}function eu(t){return qo.create(tu(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Bi()}}(t.fieldFilter.op),t.fieldFilter.value)}function nu(t){switch(t.unaryFilter.op){case"IS_NAN":var e=tu(t.unaryFilter.field);return qo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=tu(t.unaryFilter.field);return qo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=tu(t.unaryFilter.field);return qo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=tu(t.unaryFilter.field);return qo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Bi()}}function ru(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function iu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function ou(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=au(e)),e=su(t.get(n),e);return au(e)}function su(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function au(t){return t+"\x01\x01"}function uu(t){var e=t.length;if(Gi(e>=2),2===e)return Gi("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),no.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Bi(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Bi()}o=s+2}return new no(r)}var cu=function(t,e){this.seconds=t,this.nanoseconds=e},lu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};lu.store="owner",lu.key="owner";var hu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};hu.store="mutationQueues",hu.keyPath="userId";var fu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};fu.store="mutations",fu.keyPath="batchId",fu.userMutationsIndex="userMutationsIndex",fu.userMutationsKeyPath=["userId","batchId"];var du=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ou(e)]},t.key=function(t,e,n){return[t,ou(e),n]},t}();du.store="documentMutations",du.PLACEHOLDER=new du;var pu=function(t,e){this.path=t,this.readTime=e},yu=function(t,e){this.path=t,this.version=e},mu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};mu.store="remoteDocuments",mu.readTimeIndex="readTimeIndex",mu.readTimeIndexPath="readTime",mu.collectionReadTimeIndex="collectionReadTimeIndex",mu.collectionReadTimeIndexPath=["parentPath","readTime"];var gu=function(t){this.byteSize=t};gu.store="remoteDocumentGlobal",gu.key="remoteDocumentGlobalKey";var vu=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};vu.store="targets",vu.keyPath="targetId",vu.queryTargetsIndexName="queryTargetsIndex",vu.queryTargetsKeyPath=["canonicalId","targetId"];var bu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};bu.store="targetDocuments",bu.keyPath=["targetId","path"],bu.documentTargetsIndex="documentTargetsIndex",bu.documentTargetsKeyPath=["path","targetId"];var wu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};wu.key="targetGlobalKey",wu.store="targetGlobal";var _u=function(t,e){this.collectionId=t,this.parent=e};_u.store="collectionParents",_u.keyPath=["collectionId","parent"];var Eu=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Eu.store="clientMetadata",Eu.keyPath="clientId";var Tu=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Tu.store="bundles",Tu.keyPath="bundleId";var Iu=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Iu.store="namedQueries",Iu.keyPath="name";var Su=(0,Oi.ev)((0,Oi.ev)([],(0,Oi.ev)((0,Oi.ev)([],(0,Oi.ev)((0,Oi.ev)([],(0,Oi.ev)((0,Oi.ev)([],[hu.store,fu.store,du.store,mu.store,vu.store,lu.store,wu.store,bu.store]),[Eu.store])),[gu.store])),[_u.store])),[Tu.store,Iu.store]),Cu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Au=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),xu=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},ku=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Bi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Du=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new xu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Ru(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Mu(e.target.error);n.ft.reject(new Ru(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Ru(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Mi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Vu(e)},t}(),Nu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,_t.z$)())&&ji("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Mi("SimpleDb","Removing database:",t),Lu(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,_t.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Mi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Ru(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Vi(Pi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Ru(t,n))},i.onupgradeneeded=function(t){Mi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Mi("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,Oi.mG)(this,void 0,void 0,function(){var i,o,s,a,u;return(0,Oi.Jh)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return(0,Oi.Jh)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Du.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),ku.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Mi("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Ou=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Lu(this.Pt.delete())},t}(),Ru=function(t){function e(e,n){var r=this;return(r=t.call(this,Pi.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,Oi.ZT)(e,t),e}(Vi);function Pu(t){return"IndexedDbTransactionError"===t.name}var Vu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Mi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Mi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Lu(n)},t.prototype.add=function(t){return Mi("SimpleDb","ADD",this.store.name,t,t),Lu(this.store.add(t))},t.prototype.get=function(t){var e=this;return Lu(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Mi("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Mi("SimpleDb","DELETE",this.store.name,t),Lu(this.store.delete(t))},t.prototype.count=function(){return Mi("SimpleDb","COUNT",this.store.name),Lu(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Mi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new ku(function(n,r){e.onerror=function(t){var e=Mu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new ku(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Ou(i),s=e(i.primaryKey,i.value,o);if(s instanceof ku){var a=s.catch(function(t){return o.done(),ku.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return ku.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Lu(t){return new ku(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Mu(t.target.error);n(e)}})}var Fu=!1;function Mu(t){var e=Nu._t((0,_t.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Vi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Fu||(Fu=!0,setTimeout(function(){throw r},0)),r}}return t}var ju=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,Oi.ZT)(e,t),e}(Au);function Uu(t,e){var n=Hi(t);return Nu.It(n.Mt,e)}var qu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&js(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Us(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Us(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument($i.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},pa())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ji(this.mutations,t.mutations,function(t,e){return Bs(t,e)})&&Ji(this.baseMutations,t.baseMutations,function(t,e){return Bs(t,e)})},t}(),Bu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Gi(e.mutations.length===r.length);for(var i=fa(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Gu=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=$i.min()),void 0===o&&(o=$i.min()),void 0===s&&(s=so.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Hu=function(t){this.Lt=t};function zu(t,e){if(e.document)return Ba(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=vo.fromSegments(e.noDocument.path),r=Wu(e.noDocument.readTime),i=Vo.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=vo.fromSegments(e.unknownDocument.path);return r=Wu(e.unknownDocument.version),Vo.newUnknownDocument(o,r)}return Bi()}function Ku(t,e,n){var r=Zu(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Va(t,e.key),fields:e.data.value.mapValue.fields,updateTime:ka(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new mu(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Qu(e.version);return s=e.hasCommittedMutations,new mu(null,new pu(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Qu(e.version);return new mu(new yu(c,l),null,null,!0,r,i)}return Bi()}function Zu(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ju(t){var e=new Wi(t[0],t[1]);return $i.fromTimestamp(e)}function Qu(t){var e=t.toTimestamp();return new cu(e.seconds,e.nanoseconds)}function Wu(t){var e=new Wi(t.seconds,t.nanoseconds);return $i.fromTimestamp(e)}function $u(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Ha(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Ha(t.Lt,e)}),o=Wi.fromMillis(e.localWriteTimeMs);return new qu(e.batchId,o,n,i)}function Yu(t){var e,n,r=Wu(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Wu(t.lastLimboFreeSnapshotVersion):$i.min();return void 0!==t.query.documents?(Gi(1===(n=t.query).documents.length),e=hs(is(Ma(n.documents[0])))):e=function(t){return hs(Za(t))}(t.query),new Gu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,so.fromBase64String(t.resumeToken))}function Xu(t,e){var n,r=Qu(e.snapshotVersion),i=Qu(e.lastLimboFreeSnapshotVersion);n=Uo(e.target)?za(t.Lt,e.target):Ka(t.Lt,e.target);var o=e.resumeToken.toBase64();return new vu(e.targetId,Mo(e.target),r,o,e.sequenceNumber,i,n)}function tc(t){var e=Za({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?fs(e,e.limit,"L"):e}var ec=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return nc(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Wu(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return nc(t).put({bundleId:(n=e).id,createTime:Qu(Oa(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return rc(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:tc(e.bundledQuery),readTime:Wu(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return rc(t).put(function(t){return{name:t.name,readTime:Qu(Oa(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function nc(t){return Uu(t,Tu.store)}function rc(t){return Uu(t,Iu.store)}var ic=function(){function t(){this.Bt=new oc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),ku.resolve()},t.prototype.getCollectionParents=function(t,e){return ku.resolve(this.Bt.getEntries(e))},t}(),oc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new oa(no.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new oa(no.comparator)).toArray()},t}(),sc=function(){function t(){this.qt=new oc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:ou(i)};return ac(t).put(o)}return ku.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Qi(e),""],!1,!0);return ac(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(uu(o.parent))}return n})},t}();function ac(t){return Uu(t,_u.store)}var uc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function lc(t,e,n){var r=t.store(fu.store),i=t.store(du.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Gi(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=du.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return ku.waitFor(o).next(function(){return c})}function hc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Bi();e=t.noDocument}return JSON.stringify(e).length}cc.DEFAULT_COLLECTION_PERCENTILE=10,cc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cc.DEFAULT=new cc(41943040,cc.DEFAULT_COLLECTION_PERCENTILE,cc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cc.DISABLED=new cc(-1,0,0);var fc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Gi(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pc(t).$t({index:fu.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=yc(t),s=pc(t);return s.add({}).next(function(a){Gi("number"==typeof a);for(var u=new qu(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Ga(t.Lt,e)}),i=n.mutations.map(function(e){return Ga(t.Lt,e)});return new fu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new oa(function(t,e){return Zi(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],y=du.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(y,du.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),ku.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return pc(t).get(e).next(function(t){return t?(Gi(t.userId===n.userId),$u(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?ku.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return pc(t).$t({index:fu.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Gi(e.batchId>=r),o=$u(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return pc(t).$t({index:fu.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pc(t).Nt(fu.userMutationsIndex,n).next(function(t){return t.map(function(t){return $u(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=du.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return yc(t).$t({range:i},function(r,i,s){var a=r[0],u=r[2],c=uu(r[1]);if(a===n.userId&&e.path.isEqual(c))return pc(t).get(u).next(function(t){if(!t)throw Bi();Gi(t.userId===n.userId),o.push($u(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new oa(Zi),i=[];return e.forEach(function(e){var o=du.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=yc(t).$t({range:s},function(t,i,o){var s=t[0],a=t[2],u=uu(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),ku.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=du.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new oa(Zi);return yc(t).$t({range:s},function(t,e,o){var s=t[0],u=t[2],c=uu(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(pc(t).get(e).next(function(t){if(null===t)throw Bi();Gi(t.userId===n.userId),r.push($u(n.R,t))}))}),ku.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return lc(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),ku.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return ku.resolve();var r=IDBKeyRange.lowerBound(du.prefixForUser(e.userId)),i=[];return yc(t).$t({range:r},function(t,n,r){if(t[0]===e.userId){var o=uu(t[1]);i.push(o)}else r.done()}).next(function(){Gi(0===i.length)})})},t.prototype.containsKey=function(t,e){return dc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return mc(t).get(this.userId).next(function(t){return t||new hu(e.userId,-1,"")})},t}();function dc(t,e,n){var r=du.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return yc(t).$t({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function pc(t){return Uu(t,fu.store)}function yc(t){return Uu(t,du.store)}function mc(t){return Uu(t,hu.store)}var gc=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),vc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new gc(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return $i.fromTimestamp(new Wi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return bc(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Gi(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return bc(t).$t(function(s,a){var u=Yu(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return ku.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return bc(t).$t(function(t,n){var r=Yu(n);e(r)})},t.prototype.Xt=function(t){return wc(t).get(wu.key).next(function(t){return Gi(null!==t),t})},t.prototype.Zt=function(t,e){return wc(t).put(wu.key,e)},t.prototype.te=function(t,e){return bc(t).put(Xu(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Mo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bc(t).$t({range:r,index:vu.queryTargetsIndexName},function(t,n,r){var o=Yu(n);jo(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=_c(t);return e.forEach(function(e){var s=ou(e.path);i.push(o.put(new bu(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),ku.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=_c(t);return ku.forEach(e,function(e){var o=ou(e.path);return ku.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=_c(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=_c(t),i=pa();return r.$t({range:n,kt:!0},function(t,e,n){var r=uu(t[1]),o=new vo(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=ou(e.path),r=IDBKeyRange.bound([n],[Qi(n)],!1,!0),i=0;return _c(t).$t({index:bu.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return bc(t).get(e).next(function(t){return t?Yu(t):null})},t}();function bc(t){return Uu(t,vu.store)}function wc(t){return Uu(t,wu.store)}function _c(t){return Uu(t,bu.store)}function Ec(t){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){if(t.code!==Pi.FAILED_PRECONDITION||t.message!==Cu)throw t;return Mi("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Tc(t,e){var n=t[1],r=e[1],i=Zi(t[0],e[0]);return 0===i?Zi(n,r):i}var Ic=function(){function t(t){this.ne=t,this.buffer=new oa(Tc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Tc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Sc=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Mi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return(0,Oi.mG)(e,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Pu(e=n.sent())?(Mi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Ec(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Cc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return ku.resolve(Ri.o);var r=new Ic(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Mi("LruGarbageCollector","Garbage collection skipped; disabled"),ku.resolve(uc)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Mi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),uc):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Mi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Fi()<=Et.in.DEBUG&&Mi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),ku.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Ac=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Cc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return xc(t,n)},t.prototype.removeReference=function(t,e,n){return xc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return xc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return mc(t).Ot(function(r){return dc(t,r,e).next(function(t){return t&&(n=!0),ku.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),_c(t).delete([0,ou(s.path)])})});i.push(u)}}).next(function(){return ku.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return xc(t,e)},t.prototype.we=function(t,e){var n,r=_c(t),i=Ri.o;return r.$t({index:bu.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ri.o&&e(new vo(uu(n)),i),i=s,n=o):i=Ri.o}).next(function(){i!==Ri.o&&e(new vo(uu(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function xc(t,e){return _c(t).put(function(t,e){return new bu(0,ou(t.path),e)}(e,t.currentSequenceNumber))}var kc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Xi(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return to(this.inner)},t}(),Dc=function(){function t(){this.changes=new kc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:$i.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Vo.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?ku.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Nc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Pc(t).put(Vc(e),n)},t.prototype.removeEntry=function(t,e){var n=Pc(t),r=Vc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Pc(t).get(Vc(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Pc(t).get(Vc(e)).next(function(t){return{document:n.ye(e,t),size:hc(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=ua();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=ua(),i=new na(vo.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,hc(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return ku.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Pc(t).$t({range:r},function(t,e,r){for(var s=vo.fromSegments(t);o&&vo.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ua(),o=e.path.length+1,s={};if(n.isEqual($i.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Zu(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=mu.collectionReadTimeIndex}return Pc(t).$t(s,function(t,n,s){if(t.length===o){var a=zu(r.R,n);e.path.isPrefixOf(a.key.path)?ms(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Oc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Rc(t).get(gu.key).next(function(t){return Gi(!!t),t})},t.prototype.me=function(t,e){return Rc(t).put(gu.key,e)},t.prototype.ye=function(t,e){if(e){var n=zu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual($i.min()))return n}return Vo.newInvalidDocument(t)},t}(),Oc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new kc(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return(0,Oi.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new oa(function(t,e){return Zi(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Ku(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=hc(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Ku(e.Ie.R,Vo.newNoDocument(o,$i.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),ku.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Dc);function Rc(t){return Uu(t,gu.store)}function Pc(t){return Uu(t,mu.store)}function Vc(t){return t.path.toArray()}var Lc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Gi(n<r&&n>=0&&r<=11);var o=new Du("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(lu.store)}(t),function(t){t.createObjectStore(hu.store,{keyPath:hu.keyPath}),t.createObjectStore(fu.store,{keyPath:fu.keyPath,autoIncrement:!0}).createIndex(fu.userMutationsIndex,fu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(du.store)}(t),Fc(t),function(t){t.createObjectStore(mu.store)}(t));var s=ku.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(bu.store),t.deleteObjectStore(vu.store),t.deleteObjectStore(wu.store)}(t),Fc(t)),s=s.next(function(){return function(t){var e=t.store(wu.store),n=new wu(0,0,$i.min().toTimestamp(),0);return e.put(wu.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(fu.store).Nt().next(function(n){t.deleteObjectStore(fu.store),t.createObjectStore(fu.store,{keyPath:fu.keyPath,autoIncrement:!0}).createIndex(fu.userMutationsIndex,fu.userMutationsKeyPath,{unique:!0});var r=e.store(fu.store),i=n.map(function(t){return r.put(t)});return ku.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(Eu.store,{keyPath:Eu.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(gu.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(mu.store);e.createIndex(mu.readTimeIndex,mu.readTimeIndexPath,{unique:!1}),e.createIndex(mu.collectionReadTimeIndex,mu.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Tu.store,{keyPath:Tu.keyPath})}(t),function(t){t.createObjectStore(Iu.store,{keyPath:Iu.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(mu.store).$t(function(t,n){e+=hc(n)}).next(function(){var n=new gu(e);return t.store(gu.store).put(gu.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(hu.store),r=t.store(fu.store);return n.Nt().next(function(n){return ku.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(fu.userMutationsIndex,i).next(function(r){return ku.forEach(r,function(r){Gi(r.userId===n.userId);var i=$u(e.R,r);return lc(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(bu.store),n=t.store(mu.store);return t.store(wu.store).get(wu.key).next(function(t){var r=[];return n.$t(function(n,i){var o=new no(n),s=function(t){return[0,ou(t)]}(o);r.push(e.get(s).next(function(n){return n?ku.resolve():function(n){return e.put(new bu(0,ou(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return ku.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(_u.store,{keyPath:_u.keyPath});var n=e.store(_u.store),r=new oc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:ou(i)})}};return e.store(mu.store).$t({kt:!0},function(t,e){var n=new no(t);return i(n.popLast())}).next(function(){return e.store(du.store).$t({kt:!0},function(t,e){var n=uu(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(vu.store);return n.$t(function(t,r){var i=Yu(r),o=Xu(e.R,i);return n.put(o)})},t}();function Fc(t){t.createObjectStore(bu.store,{keyPath:bu.keyPath}).createIndex(bu.documentTargetsIndex,bu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(vu.store,{keyPath:vu.keyPath}).createIndex(vu.queryTargetsIndexName,vu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(wu.store)}var Mc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jc=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Vi(Pi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ac(this,i),this.Le=n+"main",this.R=new Hu(u),this.Be=new Nu(this.Le,11,new Lc(this.R)),this.qe=new vc(this.referenceDelegate,this.R),this.Ut=new sc,this.Ue=function(t,e){return new Nc(t,e)}(this.R,this.Ut),this.Qe=new ec,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&ji("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Vi(Pi.FAILED_PRECONDITION,Mc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Ri(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,Oi.mG)(e,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return(0,Oi.mG)(e,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return(0,Oi.mG)(e,void 0,void 0,function(){return(0,Oi.Jh)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return qc(e).put(new Eu(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Pu(e))return Mi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Mi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Uc(t).get(lu.key).next(function(t){return ku.resolve(e.tn(t))})},t.prototype.en=function(t){return qc(t).delete(this.clientId)},t.prototype.nn=function(){return(0,Oi.mG)(this,void 0,void 0,function(){var t,e,n,r=this;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Uu(t,Eu.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return ku.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?ku.resolve(!0):Uc(t).get(lu.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Vi(Pi.FAILED_PRECONDITION,Mc);return!1}}return!(!e.networkEnabled||!e.inForeground)||qc(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Mi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return(0,Oi.mG)(this,void 0,void 0,function(){var t=this;return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[lu.store,Eu.store],function(e){var n=new ju(e,Ri.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return qc(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return fc.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Mi("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Su,function(o){return r=new ju(o,i.Ne?i.Ne.next():Ri.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw ji("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Vi(Pi.FAILED_PRECONDITION,Cu);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Uc(t).get(lu.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Vi(Pi.FAILED_PRECONDITION,Mc)})},t.prototype.Ze=function(t){var e=new lu(this.clientId,this.allowTabSynchronization,Date.now());return Uc(t).put(lu.key,e)},t.yt=function(){return Nu.yt()},t.prototype.Xe=function(t){var e=this,n=Uc(t);return n.get(lu.key).next(function(t){return e.tn(t)?(Mi("IndexedDbPersistence","Releasing primary lease."),n.delete(lu.key)):ku.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ji("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Mi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ji("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){ji("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Uc(t){return Uu(t,lu.store)}function qc(t){return Uu(t,Eu.store)}function Bc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Gc=function(t,e){this.progress=t,this.wn=e},Hc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return vo.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):cs(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new vo(e)).next(function(t){var e=la();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=la();return this.Ut.getCollectionParents(t,i).next(function(s){return ku.forEach(s,function(s){var a=function(t,e){return new ns(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Vo.newInvalidDocument(c),r=r.insert(c,l)),Us(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){ms(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=pa(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof zs&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),zc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=pa(),i=pa(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Kc=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual($i.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(os(e)||ss(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Fi()<=Et.in.DEBUG&&Mi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ys(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new oa(gs(t));return e.forEach(function(e,r){ms(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Fi()<=Et.in.DEBUG&&Mi("QueryEngine","Using full collection scan to execute query:",ys(e)),this.Sn.getDocumentsMatchingQuery(t,e,$i.min())},t}(),Zc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new na(Zi),this.kn=new kc(function(t){return Mo(t)},jo),this.$n=$i.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Hc(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function Jc(t,e,n,r){return new Zc(t,e,n,r)}function Qc(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Oi.Jh)(this,function(s){switch(s.label){case 0:return n=Hi(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Hc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=pa(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var y=0,m=p.mutations;y<m.length;y++)s=s.add(m[y].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Wc(t,e){var n=Hi(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=ku.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Gi(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function $c(t){var e=Hi(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function Yc(t,e){var n=Hi(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Gi(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=ua();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Xc(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual($i.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return ku.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Xc(t,e,n,r,i){var o=pa();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=ua();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual($i.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Mi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function tl(t,e){var n=Hi(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function el(t,e){var n=Hi(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?ku.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Gu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function nl(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Oi.Jh)(this,function(a){switch(a.label){case 0:r=Hi(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Pu(s=a.sent()))throw s;return Mi("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function rl(t,e,n){var r=Hi(t),i=$i.min(),o=pa();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Hi(t),i=r.kn.get(n);return void 0!==i?ku.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,hs(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:$i.min(),n?o:pa())}).next(function(t){return{documents:t,Bn:o}})})}function il(t,e){var n=Hi(t),r=Hi(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function ol(t){var e=Hi(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Hi(t),i=ua(),o=Zu(n),s=Pc(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:mu.readTimeIndex,range:a},function(t,e){var n=zu(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:Ju(o)}})}(e.On,t,e.$n)}).then(function(t){var n=t.wn;return e.$n=t.readTime,n})}function sl(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){return[2,(e=Hi(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Pc(t),n=$i.min();return e.$t({index:mu.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Ju(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.$n=t})]})})}function al(t,e,n,r){return(0,Oi.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return(0,Oi.Jh)(this,function(p){switch(p.label){case 0:for(i=Hi(t),o=pa(),s=ua(),a=fa(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,el(i,function(t){return hs(is(no.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Xc(t,f,s,$i.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.qe.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function ul(t,e,n){return void 0===n&&(n=pa()),(0,Oi.mG)(this,void 0,void 0,function(){var r,i;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return[4,el(t,hs(tc(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Hi(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=Oa(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(so.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var cl=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return ku.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:Oa(n.createTime)}),ku.resolve()},t.prototype.getNamedQuery=function(t,e){return ku.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:tc(t.bundledQuery),readTime:Oa(t.readTime)}}(e)),ku.resolve()},t}(),ll=function(){function t(){this.Wn=new oa(hl.Gn),this.zn=new oa(hl.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new hl(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new hl(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new vo(new no([])),r=new hl(n,t),i=new hl(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new vo(new no([])),n=new hl(e,t),r=new hl(e,t+1),i=pa();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new hl(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),hl=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return vo.comparator(t.key,e.key)||Zi(t.ns,e.ns)},t.Hn=function(t,e){return Zi(t.ns,e.ns)||vo.comparator(t.key,e.key)},t}(),fl=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new oa(hl.Gn)}return t.prototype.checkEmpty=function(t){return ku.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new qu(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new hl(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return ku.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return ku.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return ku.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return ku.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return ku.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new hl(e,0),i=new hl(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),ku.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new oa(Zi);return e.forEach(function(t){var e=new hl(t,0),i=new hl(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),ku.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;vo.isDocumentKey(i)||(i=i.child(""));var o=new hl(new vo(i),0),s=new oa(Zi);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),ku.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Gi(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return ku.forEach(e.mutations,function(i){var o=new hl(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new hl(e,0),r=this.rs.firstAfterOrEqual(n);return ku.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return ku.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),dl=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new na(vo.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return ku.resolve(n?n.document.clone():Vo.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ua();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Vo.newInvalidDocument(t))}),ku.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ua(),i=new vo(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||ms(e,u)&&(r=r.insert(u.key,u.clone()))}return ku.resolve(r)},t.prototype.fs=function(t,e){return ku.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new pl(this)},t.prototype.getSize=function(t){return ku.resolve(this.size)},t}(),pl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,Oi.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),ku.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Dc),yl=function(){function t(t){this.persistence=t,this.ds=new kc(function(t){return Mo(t)},jo),this.lastRemoteSnapshotVersion=$i.min(),this.highestTargetId=0,this.ws=0,this._s=new ll,this.targetCount=0,this.ys=gc.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),ku.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return ku.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return ku.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),ku.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),ku.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new gc(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,ku.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),ku.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,ku.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),ku.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return ku.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return ku.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),ku.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),ku.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),ku.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return ku.resolve(n)},t.prototype.containsKey=function(t,e){return ku.resolve(this._s.containsKey(e))},t}(),ml=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ri(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new yl(this),this.Ut=new ic,this.Ue=function(t,e){return new dl(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Hu(e),this.Qe=new cl(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new fl(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Mi("MemoryPersistence","Starting transaction:",t);var i=new gl(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return ku.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),gl=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,Oi.ZT)(e,t),e}(Au),vl=function(){function t(t){this.persistence=t,this.As=new ll,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Bi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),ku.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),ku.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),ku.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ku.forEach(this.vs,function(r){var i=vo.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return ku.or([function(){return ku.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),bl=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function wl(t,e){return"firestore_clients_"+t+"_"+e}function _l(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function El(t,e){return"firestore_targets_"+t+"_"+e}bl.UNAUTHENTICATED=new bl(null),bl.GOOGLE_CREDENTIALS=new bl("google-credentials-uid"),bl.FIRST_PARTY=new bl("first-party-uid");var Tl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Vi(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(ji("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Il=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Vi(i.error.code,i.error.message)),o?new t(e,i.state,r):(ji("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Sl=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ma(),s=0;i&&s<r.activeTargetIds.length;++s)i=go(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ji("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Cl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ji("SharedClientState","Failed to parse online state: "+e),null)},t}(),Al=function(){function t(){this.activeTargetIds=ma()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),xl=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new na(Zi),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=wl(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Al),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,Oi.mG)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return(0,Oi.Jh)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(wl(this.persistenceKey,r)))&&(o=Sl.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(El(this.persistenceKey,t));if(n){var r=Il.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(El(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Mi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Mi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Mi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Mi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void ji("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return(0,Oi.mG)(e,void 0,void 0,function(){var t,e,r,i,o,s;return(0,Oi.Jh)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Ri.o;if(null!=t)try{var n=JSON.parse(t);Gi("number"==typeof n),e=n}catch(t){ji("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ri.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Tl(this.currentUser,t,e,n),i=_l(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=_l(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=El(this.persistenceKey,t),i=new Il(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Sl.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Tl.Vs(new bl(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Il.Vs(r,e)},t.prototype.js=function(t){return Cl.Vs(t)},t.prototype.ii=function(t){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Mi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ma();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),kl=function(){function t(){this.li=new Al,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Al,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Dl=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Nl=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Mi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Mi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ol={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Rl=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Pl=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,Oi.ZT)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new Ni;s.listenOnce(Ai.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Ci.NO_ERROR:var e=s.getResponseJson();Mi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Ci.TIMEOUT:Mi("Connection",'RPC "'+t+'" timed out'),o(new Vi(Pi.DEADLINE_EXCEEDED,"Request time out"));break;case Ci.HTTP_ERROR:var n=s.getStatus();if(Mi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Pi).indexOf(e)>=0?e:Pi.UNKNOWN}(r.status);o(new Vi(a,r.message))}else o(new Vi(Pi.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Vi(Pi.UNAVAILABLE,"Connection failed."));break;default:Bi()}}finally{Mi("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new yi,i=vn(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new ki({})),this.Fi(o.initMessageHeaders,e),(0,_t.uI)()||(0,_t.b$)()||(0,_t.d)()||(0,_t.w1)()||(0,_t.Mn)()||(0,_t.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Mi("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Rl({Ei:function(t){c?Mi("Connection","Not sending because WebChannel is closed:",t):(u||(Mi("Connection","Opening WebChannel transport."),a.open(),u=!0),Mi("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Di.EventType.OPEN,function(){c||Mi("Connection","WebChannel transport opened.")}),h(a,Di.EventType.CLOSE,function(){c||(c=!0,Mi("Connection","WebChannel transport closed"),l.Vi())}),h(a,Di.EventType.ERROR,function(t){c||(c=!0,Ui("Connection","WebChannel transport errored:",t),l.Vi(new Vi(Pi.UNAVAILABLE,"The operation could not be completed")))}),h(a,Di.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Gi(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Mi("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Qs[t];if(void 0!==e)return ea(e)}(i),s=r.message;void 0===o&&(o=Pi.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Vi(o,s)),a.close()}else Mi("Connection","WebChannel received:",n),l.Si(n)}}),h(i,xi.STAT_EVENT,function(t){10===t.stat?Mi("Connection","Detected buffering proxy"):11===t.stat&&Mi("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Mi("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Mi("RestConnection","Received: ",t),t},function(e){throw Ui("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.8",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Ol[t]},t}());function Vl(){return"undefined"!=typeof window?window:null}function Ll(){return"undefined"!=typeof document?document:null}function Fl(t){return new xa(t,!0)}var Ml=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Mi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),jl=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Ml(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Pi.RESOURCE_EXHAUSTED?(ji(e.toString()),ji("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Pi.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Vi(Pi.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return(0,Oi.mG)(t,void 0,void 0,function(){return(0,Oi.Jh)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Mi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Mi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Ul=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,Oi.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Bi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Gi(void 0===e||"string"==typeof e),so.fromBase64String(e||"")):(Gi(void 0===e||e instanceof Uint8Array),so.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Pi.UNKNOWN:ea(t.code);return new Vi(e,t.message||"")}(a);n=new _a(r,i,o,s||null)}else if("documentChange"in e){i=La(t,(r=e.documentChange).document.name),o=Oa(r.document.updateTime);var a=new Ro({mapValue:{fields:r.document.fields}}),u=(s=Vo.newFoundDocument(i,o,a),r.targetIds||[]);n=new ba(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=La(t,(r=e.documentDelete).document),o=r.readTime?Oa(r.readTime):$i.min(),a=Vo.newNoDocument(i,o),n=new ba([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=La(t,(r=e.documentRemove).document),n=new ba([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Bi();var c=e.filter;i=new Xs(r=c.count||0),n=new wa(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return $i.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?$i.min():e.readTime?Oa(e.readTime):$i.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=ja(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Uo(r)?{documents:za(t,r)}:{query:Ka(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Da(t,e.resumeToken):e.snapshotVersion.compareTo($i.min())>0&&(n.readTime=ka(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Bi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=ja(this.R),e.removeTarget=t,this.cr(e)},e}(jl),ql=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,Oi.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Gi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Gi(void 0!==e),t.map(function(t){return function(t,e){var n=Oa(t.updateTime?t.updateTime:e);return n.isEqual($i.min())&&(n=Oa(e)),new Vs(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=Oa(t.commitTime);return this.listener.Tr(n,e)}return Gi(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=ja(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Ga(e.R,t)})};this.cr(n)},e}(jl),Bl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,Oi.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Vi(Pi.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Pi.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Vi(Pi.UNKNOWN,t.toString())})},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.$i(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Pi.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Vi(Pi.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Gl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(ji(e),this.Vr=!1):Mi("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Hl=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return(0,Oi.mG)(o,void 0,void 0,function(){return(0,Oi.Jh)(this,function(t){switch(t.label){case 0:return Xl(this)?(Mi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return(e=Hi(t)).Or.add(4),[4,Kl(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,zl(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Gl(n,r)};function zl(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e,n;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:if(!Xl(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Kl(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e,n;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Zl(t,e){var n=Hi(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Yl(n)?$l(n):ph(n).er()&&Ql(n,e))}function Jl(t,e){var n=Hi(t),r=ph(n);n.$r.delete(e),r.er()&&Wl(n,e),0===n.$r.size&&(r.er()?r.ir():Xl(n)&&n.Br.set("Unknown"))}function Ql(t,e){t.qr.U(e.targetId),ph(t).mr(e)}function Wl(t,e){t.qr.U(e),ph(t).yr(e)}function $l(t){t.qr=new Ta({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),ph(t).start(),t.Br.Sr()}function Yl(t){return Xl(t)&&!ph(t).tr()&&t.$r.size>0}function Xl(t){return 0===Hi(t).Or.size}function th(t){t.qr=void 0}function eh(t){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){return t.$r.forEach(function(e,n){Ql(t,e)}),[2]})})}function nh(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(n){return th(t),Yl(t)?(t.Br.Nr(e),$l(t)):t.Br.set("Unknown"),[2]})})}function rh(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r,i,o;return(0,Oi.Jh)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof _a&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i,o;return(0,Oi.Jh)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Mi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ih(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ba?t.qr.X(e):e instanceof wa?t.qr.rt(e):t.qr.et(e),n.isEqual($i.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,$c(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(so.EMPTY_BYTE_STRING,n.snapshotVersion)),Wl(t,e);var r=new Gu(n.target,e,1,n.sequenceNumber);Ql(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Mi("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,ih(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function ih(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r=this;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:if(!Pu(e))throw e;return t.Or.add(1),[4,Kl(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return $c(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return(0,Oi.mG)(r,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return Mi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,zl(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function oh(t,e){return e().catch(function(n){return ih(t,n,e)})}function sh(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e,n,r,i,o;return(0,Oi.Jh)(this,function(s){switch(s.label){case 0:e=Hi(t),n=yh(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Xl(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,tl(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=yh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,ih(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return ah(e)&&uh(e),[2]}})})}function ah(t){return Xl(t)&&!yh(t).tr()&&t.kr.length>0}function uh(t){yh(t).start()}function ch(t){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){return yh(t).Ar(),[2]})})}function lh(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e,n,r;return(0,Oi.Jh)(this,function(i){for(e=yh(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function hh(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r,i;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Bu.from(r,e,n),[4,oh(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,sh(t)];case 2:return o.sent(),[2]}})})}function fh(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return e&&yh(t).pr?[4,function(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return ta(r=e.code)&&r!==Pi.ABORTED?(n=t.kr.shift(),yh(t).sr(),[4,oh(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,sh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ah(t)&&uh(t),[2]}})})}function dh(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:return n=Hi(t),e?(n.Or.delete(2),[4,zl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Kl(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function ph(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Hi(t);return r.br(),new Ul(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:eh.bind(null,t),Ri:nh.bind(null,t),_r:rh.bind(null,t)}),t.Mr.push(function(n){return(0,Oi.mG)(e,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Yl(t)?$l(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),th(t),e.label=3;case 3:return[2]}})})})),t.Ur}function yh(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Hi(t);return r.br(),new ql(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ch.bind(null,t),Ri:fh.bind(null,t),Ir:lh.bind(null,t),Tr:hh.bind(null,t)}),t.Mr.push(function(n){return(0,Oi.mG)(e,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,sh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Mi("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var mh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vi(Pi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function gh(t,e){if(ji("AsyncQueue",e+": "+t),Pu(t))return new Vi(Pi.UNAVAILABLE,e+": "+t);throw t}var vh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||vo.comparator(e.key,n.key)}:function(t,e){return vo.comparator(t.key,e.key)},this.keyedMap=la(),this.sortedSet=new na(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),bh=function(){function t(){this.Kr=new na(vo.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Bi():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),wh=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,vh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ds(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),_h=function(){this.Wr=void 0,this.listeners=[]},Eh=function(){this.queries=new kc(function(t){return ps(t)},ds),this.onlineState="Unknown",this.Gr=new Set};function Th(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Oi.Jh)(this,function(c){switch(c.label){case 0:if(n=Hi(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new _h),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=gh(a,"Initialization of query '"+ys(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Ah(n),[2]}})})}function Ih(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Oi.Jh)(this,function(a){return n=Hi(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Sh(t,e){for(var n=Hi(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Ah(n)}function Ch(t,e,n){var r=Hi(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Ah(t){t.Gr.forEach(function(t){t.next()})}var xh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new wh(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=wh.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),kh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Dh=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return La(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ba(this.R,t.document,!1):Vo.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return Oa(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Dh(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||pa()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return(0,Oi.mG)(this,void 0,void 0,function(){var t,e,n,r,i;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return[4,al(this.localStore,new Dh(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,ul(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Gc(Object.assign({},this.progress),t))]}})})}}();var Nh=function(t){this.key=t},Oh=function(t){this.key=t},Rh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=pa(),this.mutatedKeys=pa(),this.lo=gs(t),this.fo=new vh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new bh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=os(this.query)&&i.size===this.query.limit?i.last():null,c=ss(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=ms(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),os(this.query)||ss(this.query))for(;s.size>this.query.limit;){var l=os(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Bi()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new wh(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new bh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=pa(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Oh(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Nh(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=pa();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return wh.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Ph=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Vh=function(t){this.key=t,this.bo=!1},Lh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new kc(function(t){return ps(t)},ds),this.Vo=new Map,this.So=new Set,this.Do=new na(vo.comparator),this.Co=new Map,this.No=new ll,this.xo={},this.Fo=new Map,this.ko=gc.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Fh(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Oi.Jh)(this,function(a){switch(a.label){case 0:return n=df(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,el(n.localStore,hs(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Mh(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Zl(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Mh(t,e,n,r){return(0,Oi.mG)(this,void 0,void 0,function(){var i,o,s,a,u,c;return(0,Oi.Jh)(this,function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,Oi.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Oi.Jh)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,rl(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,($h(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,rl(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Rh(e,i.Bn),s=o._o(i.documents),a=va.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),$h(t,n,u.To),c=new Ph(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function jh(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return n=Hi(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!ds(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,nl(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Jl(n.remoteStore,r.targetId),Qh(n,r.targetId)}).catch(Ec)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Qh(n,r.targetId),[4,nl(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Uh(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Oi.Jh)(this,function(a){switch(a.label){case 0:r=pf(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Hi(t),i=Wi.now(),o=e.reduce(function(t,e){return t.add(e.key)},pa());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=qs(c,n.get(c.key));null!=l&&s.push(new zs(c.key,l,Po(l.value.mapValue),Ls.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new na(Zi)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,tf(r,i.changes)];case 3:return a.sent(),[4,sh(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=gh(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function qh(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:n=Hi(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Yc(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Gi(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Gi(r.bo):t.removedDocuments.size>0&&(Gi(r.bo),r.bo=!1))}),[4,tf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Ec(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Bh(t,e,n){var r=Hi(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Hi(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Ah(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Gh(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u;return(0,Oi.Jh)(this,function(c){switch(c.label){case 0:return(r=Hi(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new na(vo.comparator)).insert(o,Vo.newNoDocument(o,$i.min())),a=pa().add(o),u=new ga($i.min(),new Map,new oa(Zi),s,a),[4,qh(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Xh(r),[3,4];case 2:return[4,nl(r.localStore,e,!1).then(function(){return Qh(r,e,n)}).catch(Ec)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Hh(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:n=Hi(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Wc(n.localStore,e)];case 2:return i=o.sent(),Jh(n,r,null),Zh(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,tf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ec(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function zh(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r,i;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:r=Hi(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Hi(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Gi(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Jh(r,e,n),Zh(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,tf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Ec(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Kh(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,Oi.Jh)(this,function(a){switch(a.label){case 0:Xl((n=Hi(t)).remoteStore)||Mi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Hi(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=gh(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Zh(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function Jh(t,e,n){var r=Hi(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Qh(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Wh(t,e)})}function Wh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Jl(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Xh(t))}function $h(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Nh?(t.No.addReference(o.key,e),Yh(t,o)):o instanceof Oh?(Mi("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Wh(t,o.key)):Bi()}}function Yh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Mi("SyncEngine","New document in limbo: "+n),t.So.add(r),Xh(t))}function Xh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new vo(no.fromString(e)),r=t.ko.next();t.Co.set(r,new Vh(n)),t.Do=t.Do.insert(n,r),Zl(t.remoteStore,new Gu(hs(is(n.path)),r,2,Ri.o))}}function tf(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r,i,o,s;return(0,Oi.Jh)(this,function(a){switch(a.label){case 0:return r=Hi(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.Oo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=zc.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return(0,Oi.Jh)(this,function(l){switch(l.label){case 0:n=Hi(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return ku.forEach(e,function(e){return ku.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return ku.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Pu(r=l.sent()))throw r;return Mi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function ef(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return(n=Hi(t)).currentUser.isEqual(e)?[3,3]:(Mi("SyncEngine","User change. New user:",e.toKey()),[4,Qc(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Vi(Pi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,tf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function nf(t,e){var n=Hi(t),r=n.Co.get(e);if(r&&r.bo)return pa().add(r.key);var i=pa(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function rf(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return[4,rl((n=Hi(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&$h(n,e.targetId,i.To),i)]}})})}function of(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){return[2,ol((e=Hi(t)).localStore).then(function(t){return tf(e,t)})]})})}function sf(t,e,n,r){return(0,Oi.mG)(this,void 0,void 0,function(){var i,o;return(0,Oi.Jh)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Hi(t),r=Hi(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):ku.resolve(null)})})}((i=Hi(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,sh(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Jh(i,e,r||null),Zh(i,e),function(t,e){Hi(Hi(t)._n).Gt(e)}(i.localStore,e)):Bi(),s.label=4;case 4:return[4,tf(i,o)];case 5:return s.sent(),[3,7];case 6:Mi("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function af(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return(0,Oi.Jh)(this,function(c){switch(c.label){case 0:return df(n=Hi(t)),pf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,uf(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,dh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Zl(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Qh(n,e),nl(n.localStore,e,!0)}),Jl(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,uf(n,a)];case 5:return c.sent(),function(t){var e=Hi(t);e.Co.forEach(function(t,n){Jl(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new na(vo.comparator)}(n),n.$o=!1,[4,dh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function uf(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return(0,Oi.Jh)(this,function(y){switch(y.label){case 0:n=Hi(t),r=[],i=[],o=0,s=e,y.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,el(n.localStore,hs(c[0]))]:[3,7]):[3,13];case 2:u=y.sent(),l=0,h=c,y.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,rf(n,f)]):[3,6];case 4:(d=y.sent()).snapshot&&i.push(d.snapshot),y.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,il(n.localStore,a)];case 8:return p=y.sent(),[4,el(n.localStore,p)];case 9:return u=y.sent(),[4,Mh(n,cf(p),a,!1)];case 10:y.sent(),y.label=11;case 11:r.push(u),y.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function cf(t){return rs(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lf(t){var e=Hi(t);return Hi(Hi(e.localStore).persistence).fn()}function hf(t,e,n,r){return(0,Oi.mG)(this,void 0,void 0,function(){var i,o,s;return(0,Oi.Jh)(this,function(a){switch(a.label){case 0:return(i=Hi(t)).$o?(Mi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ol(i.localStore)];case 3:return o=a.sent(),s=ga.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,tf(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,nl(i.localStore,e,!0)];case 6:return a.sent(),Qh(i,e,r),[3,8];case 7:Bi(),a.label=8;case 8:return[2]}})})}function ff(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return(0,Oi.Jh)(this,function(f){switch(f.label){case 0:if(!(r=df(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Mi("SyncEngine","Adding an already active target "+s),[3,5]):[4,il(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,el(r.localStore,a)];case 3:return u=f.sent(),[4,Mh(r,cf(a),u.targetId,!1)];case 4:f.sent(),Zl(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,nl(r.localStore,t,!1).then(function(){Jl(r.remoteStore,t),Qh(r,t)}).catch(Ec)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function df(t){var e=Hi(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Gh.bind(null,e),e.vo._r=Sh.bind(null,e.eventManager),e.vo.Mo=Ch.bind(null,e.eventManager),e}function pf(t){var e=Hi(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zh.bind(null,e),e}var yf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return this.R=Fl(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return Jc(this.persistence,new Kc,t.initialUser,this.R)},t.prototype.qo=function(t){return new ml(vl.bs,this.R)},t.prototype.Bo=function(t){return new kl},t.prototype.terminate=function(){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),mf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,Oi.ZT)(e,t),e.prototype.initialize=function(e){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,sl(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,pf(this.Ko.syncEngine)];case 4:return n.sent(),[4,sh(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return Jc(this.persistence,new Kc,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Sc(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Bc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?cc.withCacheSize(this.cacheSizeBytes):cc.DEFAULT;return new jc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Vl(),Ll(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new kl},e}(yf),gf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,Oi.ZT)(e,t),e.prototype.initialize=function(e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r=this;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof xl?(this.sharedClientState.syncEngine={ui:sf.bind(null,n),ai:hf.bind(null,n),hi:ff.bind(null,n),fn:lf.bind(null,n),ci:of.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return(0,Oi.mG)(r,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return[4,af(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Vl();if(!xl.yt(e))throw new Vi(Pi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Bc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new xl(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(mf),vf=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n=this;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Bh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=ef.bind(null,this.syncEngine),[4,dh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new Eh},t.prototype.createDatastore=function(t){var e=Fl(t.databaseInfo.databaseId),n=new Pl(t.databaseInfo);return function(t,e,n){return new Bl(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Bh(s.syncEngine,t,0)},o=Nl.yt()?new Nl:new Dl,new Hl(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Lh(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return e=Hi(t),Mi("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Kl(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),bf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),wf=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new xu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return(0,Oi.mG)(this,void 0,void 0,function(){var t,e,n,r;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new kh(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return(0,Oi.mG)(this,void 0,void 0,function(){var t,e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,Oi.mG)(this,void 0,void 0,function(){var t,e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e,n=this;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Vi(Pi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i,o,s,a;return(0,Oi.Jh)(this,function(u){switch(u.label){case 0:return n=Hi(t),r=ja(n.R)+"/documents",i={documents:e.map(function(t){return Va(n.R,t)})},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Gi(!!e.found);var n=La(t,e.found.name),r=Oa(e.found.updateTime),i=new Ro({mapValue:{fields:e.found.fields}});return Vo.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Gi(!!e.missing),Gi(!!e.readTime);var n=La(t,e.missing),r=Oa(e.readTime);return Vo.newNoDocument(n,r)}(t,e):Bi()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Gi(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new $s(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,Oi.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=vo.fromPath(n);e.mutations.push(new Ys(r,e.precondition(r)))}),[4,function(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return n=Hi(t),r=ja(n.R)+"/documents",i={writes:e.map(function(t){return Ga(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Bi();e=$i.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Vi(Pi.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ls.updateTime(e):Ls.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual($i.min()))throw new Vi(Pi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ls.updateTime(e)}return Ls.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),_f=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Ml(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return(0,Oi.mG)(t,void 0,void 0,function(){var t,e,n=this;return(0,Oi.Jh)(this,function(r){return t=new wf(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!yo(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!ta(e)}return!1},t}(),Ef=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=bl.UNAUTHENTICATED,this.clientId=Ki.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(t){return(0,Oi.mG)(r,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return Mi("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}})})})}return t.prototype.getConfiguration=function(){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Vi(Pi.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new xu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Oi.mG)(t,void 0,void 0,function(){var t,n;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=gh(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function Tf(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r,i=this;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Mi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(t){return(0,Oi.mG)(i,void 0,void 0,function(){return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Qc(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}})})}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function If(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Sf(t)];case 1:return n=i.sent(),Mi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(t){return function(t,e){return(0,Oi.mG)(this,void 0,void 0,function(){var n,r;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return(n=Hi(t)).asyncQueue.verifyOperationInProgress(),Mi("RemoteStore","RemoteStore received new credentials"),r=Xl(n),n.Or.add(3),[4,Kl(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,zl(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,t)}),t.onlineComponents=e,[2]}})})}function Sf(t){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Mi("FirestoreClient","Using default OfflineComponentProvider"),[4,Tf(t,new yf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Cf(t){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Mi("FirestoreClient","Using default OnlineComponentProvider"),[4,If(t,new vf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Af(t){return Sf(t).then(function(t){return t.persistence})}function xf(t){return Sf(t).then(function(t){return t.localStore})}function kf(t){return Cf(t).then(function(t){return t.remoteStore})}function Df(t){return Cf(t).then(function(t){return t.syncEngine})}function Nf(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e,n;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:return[4,Cf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Fh.bind(null,e.syncEngine),n.onUnlisten=jh.bind(null,e.syncEngine),n)]}})})}function Of(t,e,n){var r=this;void 0===n&&(n={});var i=new xu;return t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(r,void 0,void 0,function(){var r;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bf({next:function(o){e.enqueueAndForget(function(){return Ih(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Vi(Pi.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Vi(Pi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new xh(is(n.path),o,{includeMetadataChanges:!0,so:!0});return Th(t,s)},[4,Nf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Rf(t,e,n){var r=this;void 0===n&&(n={});var i=new xu;return t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(r,void 0,void 0,function(){var r;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new bf({next:function(n){e.enqueueAndForget(function(){return Ih(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Vi(Pi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new xh(n,o,{includeMetadataChanges:!0,so:!0});return Th(t,s)},[4,Nf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Pf=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Vf=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Lf=new Map,Ff=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Mf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(bl.UNAUTHENTICATED)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),jf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Uf=function(){function t(t){var e=this;this.currentUser=bl.UNAUTHENTICATED,this.oc=new xu,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable(function(){return e.changeListener(e.currentUser)})};var n=function(t){Mi("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit(function(t){return n(t)}),setTimeout(function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Mi("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}},0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Mi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Gi("string"==typeof n.accessToken),new Ff(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return(0,Oi.mG)(n,void 0,void 0,function(){return(0,Oi.Jh)(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Gi(null===t||"string"==typeof t),new bl(t)},t}(),qf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=bl.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Bf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new qf(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(bl.FIRST_PARTY)})},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Gf(t,e,n){if(!n)throw new Vi(Pi.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Hf(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function zf(t,e,n,r){if(!0===e&&!0===r)throw new Vi(Pi.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Kf(t){if(!vo.isDocumentKey(t))throw new Vi(Pi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Zf(t){if(vo.isDocumentKey(t))throw new Vi(Pi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Jf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Bi()}function Qf(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Vi(Pi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Jf(t);throw new Vi(Pi.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Wf(t,e){if(e<=0)throw new Vi(Pi.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var $f=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Vi(Pi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Vi(Pi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,zf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Yf=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $f({}),this._settingsFrozen=!1,t instanceof Vf?(this._databaseId=t,this._credentials=new Mf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Vi(Pi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vf(t.options.projectId)}(t),this._credentials=new Uf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Vi(Pi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Vi(Pi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $f(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Mf;switch(t.type){case"gapi":var e=t.client;return Gi(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Bf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Vi(Pi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Lf.get(this))&&(Mi("ComponentProvider","Removing Datastore"),Lf.delete(this),t.terminate()),Promise.resolve();var t},t}(),Xf=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new ed(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),td=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),ed=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,is(r))||this)._path=r,i.type="collection",i}return(0,Oi.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Xf(this.firestore,null,new vo(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(td);function nd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,_t.m9)(t),Gf("collection","path",e),t instanceof Yf)return Zf(n=no.fromString.apply(no,(0,Oi.ev)([e],r))),new ed(t,null,n);if(!(t instanceof Xf||t instanceof ed))throw new Vi(Pi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Zf(n=no.fromString.apply(no,(0,Oi.ev)([t.path],r)).child(no.fromString(e))),new ed(t.firestore,null,n)}function rd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,_t.m9)(t),1===arguments.length&&(e=Ki.u()),Gf("doc","path",e),t instanceof Yf)return Kf(n=no.fromString.apply(no,(0,Oi.ev)([e],r))),new Xf(t,null,new vo(n));if(!(t instanceof Xf||t instanceof ed))throw new Vi(Pi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Kf(n=t._path.child(no.fromString.apply(no,(0,Oi.ev)([e],r)))),new Xf(t.firestore,t instanceof ed?t.converter:null,new vo(n))}function id(t,e){return t=(0,_t.m9)(t),e=(0,_t.m9)(e),(t instanceof Xf||t instanceof ed)&&(e instanceof Xf||e instanceof ed)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function od(t,e){return t=(0,_t.m9)(t),e=(0,_t.m9)(e),t instanceof td&&e instanceof td&&t.firestore===e.firestore&&ds(t._query,e._query)&&t.converter===e.converter}var sd=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new Ml(this,"async_queue_retry"),this.Tc=function(){var e=Ll();e&&Mi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Ll();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=Ll();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise(function(t){}):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.Rc()})},t.prototype.Rc=function(){return(0,Oi.mG)(this,void 0,void 0,function(){var t,e=this;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Pu(t=n.sent()))throw t;return Mi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji(function(){return e.Rc()}),n.label=5;case 5:return[2]}})})},t.prototype.Ac=function(t){var e=this,n=this.dc.then(function(){return e.gc=!0,t().catch(function(t){throw e.yc=t,e.gc=!1,ji("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.gc=!1,t})});return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=mh.createAndSchedule(this,t,e,n,function(t){return r.bc(t)});return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&Bi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return(0,Oi.mG)(this,void 0,void 0,function(){var t;return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then(function(){e.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()})},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function ad(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new xu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var ud=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new sd,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,Oi.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||ld(this),this._firestoreClient.terminate()},e}(Yf);function cd(t){return t._firestoreClient||ld(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ld(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Pf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Ef(t._credentials,t._queue,r)}function hd(t,e,n){var r=this,i=new xu;return t.asyncQueue.enqueue(function(){return(0,Oi.mG)(r,void 0,void 0,function(){var r;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Tf(t,n)];case 1:return o.sent(),[4,If(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Pi.FAILED_PRECONDITION||t.code===Pi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function fd(t){if(t._initialized||t._terminated)throw new Vi(Pi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var dd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new io(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),pd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(so.fromBase64String(e))}catch(e){throw new Vi(Pi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(so.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),yd=function(t){this._methodName=t},md=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Vi(Pi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Vi(Pi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Zi(this._lat,t._lat)||Zi(this._long,t._long)},t}(),gd=/^__.*__$/,vd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new zs(t,this.data,this.fieldMask,e,this.fieldTransforms):new Hs(t,this.data,e,this.fieldTransforms)},t}(),bd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new zs(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function wd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Bi()}}var _d=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return qd(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(wd(this.Cc)&&gd.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),Ed=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Fl(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new _d({Cc:t,methodName:e,Bc:n,path:io.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Td(t){var e=t._freezeSettings(),n=Fl(t._databaseId);return new Ed(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Id(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);Fd("Data must be an object, but it was:",s,r);var a,u,c=Vd(r,s);if(o.merge)a=new oo(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Md(e,f[h],n);if(!s.contains(d))throw new Vi(Pi.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Bd(l,d)||l.push(d)}a=new oo(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new vd(new Ro(c),a,u)}var Sd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Oi.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw t.Mc(1===t.Cc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(yd);function Cd(t,e,n){return new _d({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Ad=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Oi.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new Ps(t.path,new Cs)},e.prototype.isEqual=function(t){return t instanceof e},e}(yd),xd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Oi.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Cd(this,t,!0),n=this.Uc.map(function(t){return Pd(t,e)}),r=new As(n);return new Ps(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(yd),kd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return(0,Oi.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=Cd(this,t,!0),n=this.Uc.map(function(t){return Pd(t,e)}),r=new ks(n);return new Ps(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(yd),Dd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,Oi.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ns(t.R,_s(t.R,this.Qc));return new Ps(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(yd);function Nd(t,e,n,r){var i=t.qc(1,e,n);Fd("Data must be an object, but it was:",i,r);var o=[],s=Ro.empty();Xi(r,function(t,r){var a=Ud(e,t,n);r=(0,_t.m9)(r);var u=i.$c(a);if(r instanceof Sd)o.push(a);else{var c=Pd(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new oo(o);return new bd(s,a,i.fieldTransforms)}function Od(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[Md(e,r,n)],u=[i];if(o.length%2!=0)throw new Vi(Pi.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Md(e,o[c])),u.push(o[c+1]);for(var l=[],h=Ro.empty(),f=a.length-1;f>=0;--f)if(!Bd(l,a[f])){var d=a[f],p=u[f];p=(0,_t.m9)(p);var y=s.$c(d);if(p instanceof Sd)l.push(d);else{var m=Pd(p,y);null!=m&&(l.push(d),h.set(d,m))}}var g=new oo(l);return new bd(h,g,s.fieldTransforms)}function Rd(t,e,n,r){return void 0===r&&(r=!1),Pd(n,t.qc(r?4:3,e))}function Pd(t,e){if(Ld(t=(0,_t.m9)(t)))return Fd("Unsupported field value:",e,t),Vd(t,e);if(t instanceof yd)return function(t,e){if(!wd(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Pd(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,_t.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return _s(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Wi.fromDate(t);return{timestampValue:ka(e.R,n)}}if(t instanceof Wi)return n=new Wi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ka(e.R,n)};if(t instanceof md)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof pd)return{bytesValue:Da(e.R,t._byteString)};if(t instanceof Xf){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Ra(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+Jf(t))}(t,e)}function Vd(t,e){var n={};return to(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(t,function(t,r){var i=Pd(r,e.xc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Ld(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Wi||t instanceof md||t instanceof pd||t instanceof Xf||t instanceof yd)}function Fd(t,e,n){if(!Ld(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Jf(n);throw e.Mc("an object"===r?t+" a custom object":t+" "+r)}}function Md(t,e,n){if((e=(0,_t.m9)(e))instanceof dd)return e._internalPath;if("string"==typeof e)return Ud(t,e);throw qd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var jd=new RegExp("[~\\*/\\[\\]]");function Ud(t,e,n){if(e.search(jd)>=0)throw qd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(dd.bind.apply(dd,(0,Oi.ev)([void 0],e.split(".")))))._internalPath}catch(jt){throw qd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function qd(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Vi(Pi.INVALID_ARGUMENT,(a+=". ")+t+u)}function Bd(t,e){return t.some(function(t){return t.isEqual(e)})}var Gd=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Xf(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Hd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(zd("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Hd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Oi.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Gd);function zd(t,e){return"string"==typeof e?Ud(t,e):e instanceof dd?e._internalPath:e._delegate._internalPath}var Kd=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Zd=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,Oi.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(zd("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Gd),Jd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Oi.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Zd),Qd=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Kd(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Jd(n._firestore,n._userDataWriter,r.key,r,new Kd(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Vi(Pi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Jd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Kd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Jd(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Kd(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Wd(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Wd(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Bi()}}function $d(t,e){return t instanceof Zd&&e instanceof Zd?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Qd&&e instanceof Qd&&t._firestore===e._firestore&&od(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Yd(t){if(ss(t)&&0===t.explicitOrderBy.length)throw new Vi(Pi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Xd=function(){};function tp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var ep=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Kc=e,i.jc=n,i.Wc=r,i.type="where",i}return(0,Oi.ZT)(e,t),e.prototype._apply=function(t){var e=Td(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){up(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(ap(r,t,l[c]));a={arrayValue:{values:u}}}else a=ap(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||up(s,o),a=Rd(n,"where",s,"in"===o||"not-in"===o);var h=qo.create(i,o,a);return function(t,e){if(e.g()){var n=us(t);if(null!==n&&!n.isEqual(e.field))throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=as(t);null!==r&&cp(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Vi(Pi.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Kc,this.jc,this.Wc);return new td(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Xd),np=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Kc=e,r.Gc=n,r.type="orderBy",r}return(0,Oi.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Yo(e,n);return function(t,e){if(null===as(t)){var n=us(t);null!==n&&cp(0,n,e.field)}}(t,r),r}(t._query,this.Kc,this.Gc);return new td(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new ns(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Xd),rp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return(0,Oi.ZT)(e,t),e.prototype._apply=function(t){return new td(t.firestore,t.converter,fs(t._query,this.zc,this.Hc))},e}(Xd),ip=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Oi.ZT)(e,t),e.prototype._apply=function(t){var e=sp(t,this.type,this.Jc,this.Yc);return new td(t.firestore,t.converter,function(t,e){return new ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Xd),op=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return(0,Oi.ZT)(e,t),e.prototype._apply=function(t){var e=sp(t,this.type,this.Jc,this.Yc);return new td(t.firestore,t.converter,function(t,e){return new ns(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Xd);function sp(t,e,n,r){if(n[0]=(0,_t.m9)(n[0]),n[0]instanceof Gd)return function(t,e,n,r,i){if(!r)throw new Vi(Pi.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ls(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Co(e,r.key));else{var c=r.data.field(u.field);if(ho(c))throw new Vi(Pi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Wo(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Td(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Vi(Pi.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!cs(t)&&-1!==c.indexOf("/"))throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(no.fromString(c));if(!vo.isDocumentKey(l))throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new vo(l);a.push(Co(e,h))}else{var f=Rd(n,r,c);a.push(f)}}return new Wo(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function ap(t,e,n){if("string"==typeof(n=(0,_t.m9)(n))){if(""===n)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!cs(e)&&-1!==n.indexOf("/"))throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(no.fromString(n));if(!vo.isDocumentKey(r))throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Co(t,new vo(r))}if(n instanceof Xf)return Co(t,n._key);throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Jf(n)+".")}function up(t,e){if(!Array.isArray(t)||0===t.length)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function cp(t,e,n){if(!n.isEqual(e))throw new Vi(Pi.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var lp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),bo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return co(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(lo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Bi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Xi(t.fields,function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new md(co(t.latitude),co(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=fo(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(po(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=uo(t);return new Wi(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=no.fromString(t);Gi(iu(n));var r=new Vf(n.get(1),n.get(3)),i=new vo(n.popFirst(5));return r.isEqual(e)||ji("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function hp(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var fp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Oi.ZT)(e,t),e.prototype.convertBytes=function(t){return new pd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xf(this.firestore,null,e)},e}(lp),dp=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Td(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=pp(t,this._firestore),i=hp(r.converter,e,n),o=Id(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ls.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=pp(t,this._firestore);return o="string"==typeof(e=(0,_t.m9)(e))||e instanceof dd?Od(this._dataReader,"WriteBatch.update",s._key,e,n,r):Nd(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ls.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=pp(t,this._firestore);return this._mutations=this._mutations.concat(new $s(e._key,Ls.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Vi(Pi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function pp(t,e){if((t=(0,_t.m9)(t)).firestore!==e)throw new Vi(Pi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var yp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Oi.ZT)(e,t),e.prototype.convertBytes=function(t){return new pd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xf(this.firestore,null,e)},e}(lp);function mp(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Qf(t,Xf);var o=Qf(t.firestore,ud),s=Td(o);return vp(o,[("string"==typeof(e=(0,_t.m9)(e))||e instanceof dd?Od(s,"updateDoc",t._key,e,n,r):Nd(s,"updateDoc",t._key,e)).toMutation(t._key,Ls.exists(!0))])}function gp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,_t.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||ad(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(ad(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Xf)c=Qf(t.firestore,ud),l=is(t._key.path),u={next:function(e){i[a]&&i[a](bp(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Qf(t,td);c=Qf(d.firestore,ud),l=d._query;var p=new yp(c);u={next:function(t){i[a]&&i[a](new Qd(c,p,d,t))},error:i[a+1],complete:i[a+2]},Yd(t._query)}return function(t,e,n,r){var i=this,o=new bf(r),s=new xh(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(i,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return e=Th,[4,Nf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(i,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return e=Ih,[4,Nf(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(cd(c),l,h,u)}function vp(t,e){return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(n,void 0,void 0,function(){var n;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return n=Uh,[4,Df(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(cd(t),e)}function bp(t,e,n){var r=n.docs.get(e._key),i=new yp(t);return new Zd(t,i,e._key,r,new Kd(n.hasPendingWrites,n.fromCache),e.converter)}var wp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,Oi.ZT)(e,t),e.prototype.get=function(e){var n=this,r=pp(e,this._firestore),i=new yp(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Zd(n._firestore,i,r._key,t._document,new Kd(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Td(t)}return t.prototype.get=function(t){var e=this,n=pp(t,this._firestore),r=new fp(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Bi();var i=t[0];if(i.isFoundDocument())return new Gd(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Gd(e._firestore,r,n._key,null,n.converter);throw Bi()})},t.prototype.set=function(t,e,n){var r=pp(t,this._firestore),i=hp(r.converter,e,n),o=Id(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=pp(t,this._firestore);return o="string"==typeof(e=(0,_t.m9)(e))||e instanceof dd?Od(this._dataReader,"Transaction.update",s._key,e,n,r):Nd(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=pp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function _p(){if("undefined"==typeof Uint8Array)throw new Vi(Pi.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Ep(){if("undefined"==typeof atob)throw new Vi(Pi.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Tp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Ep(),new t(pd.fromBase64String(e))},t.fromUint8Array=function(e){return _p(),new t(pd.fromUint8Array(e))},t.prototype.toBase64=function(){return Ep(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return _p(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),Ip=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){fd(t=Qf(t,ud));var n=cd(t),r=t._freezeSettings(),i=new vf;return hd(n,i,new mf(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){fd(t=Qf(t,ud));var e=cd(t),n=t._freezeSettings(),r=new vf;return hd(e,r,new gf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Vi(Pi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new xu;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return(0,Oi.mG)(e,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,Oi.mG)(this,void 0,void 0,function(){return(0,Oi.Jh)(this,function(e){switch(e.label){case 0:return Nu.yt()?[4,Nu.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Bc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Sp=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Vf||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Ui("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Qf(t,Yf))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Ui("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,_t.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Vi(Pi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new jf(new Ff(o,new bl(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Oi.mG)(e,void 0,void 0,function(){var e,n;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:return[4,Af(t)];case 1:return e=r.sent(),[4,kf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Hi(t);return e.Or.delete(0),zl(e)}(n))]}})})})}(cd(Qf(this._delegate,ud)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return(0,Oi.mG)(e,void 0,void 0,function(){var e,n;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:return[4,Af(t)];case 1:return e=r.sent(),[4,kf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,Oi.mG)(this,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return(e=Hi(t)).Or.add(0),[4,Kl(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(cd(Qf(this._delegate,ud)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&zf("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new xu;return t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(e,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(r){switch(r.label){case 0:return e=Kh,[4,Df(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(cd(Qf(this._delegate,ud)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new bf(e);return t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(n,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Hi(t).Gr.add(e),e.next()},[4,Nf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(n,void 0,void 0,function(){var e;return(0,Oi.Jh)(this,function(n){switch(n.label){case 0:return e=function(t,e){Hi(t).Gr.delete(e)},[4,Nf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(cd(t=Qf(t,ud)),ad(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new Vi(Pi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new jp(this,nd(this._delegate,t))}catch(t){throw Np(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Dp(this,rd(this._delegate,t))}catch(t){throw Np(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Lp(this,function(t,e){if(t=Qf(t,Yf),Gf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new td(t,null,function(t){return new ns(no.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Np(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(n,void 0,void 0,function(){var n;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return[4,function(t){return Cf(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new _f(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(cd(t),function(n){return e(new wp(t,n))})}(this._delegate,function(n){return t(new Ap(e,n))})},t.prototype.batch=function(){var t=this;return cd(this._delegate),new xp(new dp(this._delegate,function(e){return vp(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Vi(Pi.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Vi(Pi.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Cp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,Oi.ZT)(e,t),e.prototype.convertBytes=function(t){return new Tp(new pd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Dp.tu(e,this.firestore,null)},e}(lp),Ap=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Cp(t)}return t.prototype.get=function(t){var e=this,n=Up(t);return this._delegate.get(n).then(function(t){return new Pp(e._firestore,new Zd(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=Up(t);return n?(Hf("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Up(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Oi.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Up(t);return this._delegate.delete(e),this},t}(),xp=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Up(t);return n?(Hf("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Up(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,(0,Oi.ev)([s,e,n],i)),this},t.prototype.delete=function(t){var e=Up(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),kp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Jd(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Vp(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Cp(e),n),i.set(n,o)),o},t}();kp.nu=new WeakMap;var Dp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Cp(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new Vi(Pi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Xf(n._delegate,r,new vo(e)))},t.tu=function(e,n,r){return new t(n,new Xf(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new jp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new jp(this.firestore,nd(this._delegate,t))}catch(t){throw Np(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,_t.m9)(t))instanceof Xf&&id(this._delegate,t)},t.prototype.set=function(t,e){e=Hf("DocumentReference.set",e);try{return function(t,e,n){t=Qf(t,Xf);var r=Qf(t.firestore,ud),i=hp(t.converter,e,n);return vp(r,[Id(Td(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Ls.none())])}(this._delegate,t,e)}catch(t){throw Np(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?mp(this._delegate,t):mp.apply(void 0,(0,Oi.ev)([this._delegate,t,e],n))}catch(t){throw Np(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return vp(Qf((t=this._delegate).firestore,ud),[new $s(t._key,Ls.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Op(e),i=Rp(e,function(e){return new Pp(t.firestore,new Zd(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return gp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Qf(t,Xf);var e=Qf(t.firestore,ud),n=cd(e),r=new yp(e);return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(n,void 0,void 0,function(){var n;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r,i;return(0,Oi.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Hi(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Vi(Pi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=gh(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,xf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Zd(e,r,t._key,n,new Kd(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Qf(t,Xf);var e=Qf(t.firestore,ud);return Of(cd(e),t._key,{source:"server"}).then(function(n){return bp(e,t,n)})}(this._delegate):function(t){t=Qf(t,Xf);var e=Qf(t.firestore,ud);return Of(cd(e),t._key).then(function(n){return bp(e,t,n)})}(this._delegate)).then(function(t){return new Pp(e.firestore,new Zd(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?kp.eu(this.firestore,e):null))},t}();function Np(t,e,n){return t.message=t.message.replace(e,n),t}function Op(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ad(r))return r}return{}}function Rp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ad(t[0])?t[0]:ad(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Pp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Dp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return $d(this._delegate,t._delegate)},t}(),Vp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,Oi.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Pp),Lp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Cp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,tp(this._delegate,function(t,e,n){var r=e,i=zd("where",t);return new ep(i,r,n)}(e,n,r)))}catch(e){throw Np(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,tp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=zd("orderBy",t);return new np(r,n)}(e,n)))}catch(e){throw Np(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,tp(this._delegate,function(t){return Wf("limit",t),new rp("limit",t,"F")}(e)))}catch(e){throw Np(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,tp(this._delegate,function(t){return Wf("limitToLast",t),new rp("limitToLast",t,"L")}(e)))}catch(e){throw Np(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ip("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Np(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ip("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Np(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new op("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Np(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,tp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new op("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Np(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return od(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Qf(t,td);var e=Qf(t.firestore,ud),n=cd(e),r=new yp(e);return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget(function(){return(0,Oi.mG)(n,void 0,void 0,function(){var n;return(0,Oi.Jh)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return(0,Oi.mG)(this,void 0,void 0,function(){var r,i,o,s,a;return(0,Oi.Jh)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,rl(t,e,!0)];case 1:return a=u.sent(),r=new Rh(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=gh(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,xf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Qd(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Qf(t,td);var e=Qf(t.firestore,ud),n=cd(e),r=new yp(e);return Rf(n,t._query,{source:"server"}).then(function(n){return new Qd(e,r,t,n)})}(this._delegate):function(t){t=Qf(t,td);var e=Qf(t.firestore,ud),n=cd(e),r=new yp(e);return Yd(t._query),Rf(n,t._query).then(function(n){return new Qd(e,r,t,n)})}(this._delegate)).then(function(t){return new Mp(e.firestore,new Qd(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Op(e),i=Rp(e,function(e){return new Mp(t.firestore,new Qd(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return gp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?kp.eu(this.firestore,e):null))},t}(),Fp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Vp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Mp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Lp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Vp(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Fp(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Vp(n._firestore,r))})},t.prototype.isEqual=function(t){return $d(this._delegate,t._delegate)},t}(),jp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,Oi.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Dp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Dp(this.firestore,void 0===t?rd(this._delegate):rd(this._delegate,t))}catch(t){throw Np(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Qf(t.firestore,ud),r=rd(t),i=hp(t.converter,e);return vp(n,[Id(Td(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ls.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new Dp(e.firestore,t)})},e.prototype.isEqual=function(t){return id(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?kp.eu(this.firestore,t):null))},e}(Lp);function Up(t){return Qf(t,Xf)}var qp,Bp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(dd.bind.apply(dd,(0,Oi.ev)([void 0],t)))}return t.documentId=function(){return new t(io.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,_t.m9)(t))instanceof dd&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Gp=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Ad("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Sd("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new xd("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kd("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Dd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Hp=n(5119),zp={Firestore:Sp,GeoPoint:md,Timestamp:Wi,Blob:Tp,Transaction:Ap,WriteBatch:xp,DocumentReference:Dp,DocumentSnapshot:Pp,Query:Lp,QueryDocumentSnapshot:Vp,QuerySnapshot:Mp,CollectionReference:jp,FieldPath:Bp,FieldValue:Gp,setLogLevel:function(t){Li.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Hp.wA("firestore",function(t){return function(t,e){return new Sp(t,new ud(t,e),new Ip)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},zp)))})(qp=wt.Z),qp.registerVersion("@firebase/firestore","2.3.7");var Kp=n(5959),Zp=n(1906),Jp=n(6882);function Qp(t,e){return"function"==typeof e?n=>n.pipe(Qp((n,r)=>(0,X.D)(t(n,r)).pipe((0,W.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Wp(t))}class Wp{constructor(t){this.project=t}call(t,e){return e.subscribe(new $p(t,this.project))}}class $p extends Jp.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Jp.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Jp.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Yp=n(8489),Xp=n(7570),ty=n(3895),ey=n(9291);class ny extends Kp.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new ry(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new ty.N;if(this.isStopped||this.hasError?o=Xp.w.EMPTY:(this.observers.push(t),o=new ey.W(this,t)),r&&t.add(t=new gt.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Yp.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class ry{constructor(t,e){this.time=t,this.value=e}}function iy(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new ny(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const oy=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),sy=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var ay=n(653);function uy(t){return e=>0===t?(0,ay.c)():e.lift(new cy(t))}class cy{constructor(t){if(this.total=t,this.total<0)throw new sy}call(t,e){return e.subscribe(new ly(t,this.total))}}class ly extends ot.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function hy(t=null){return e=>e.lift(new fy(t))}class fy{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new dy(t,this.defaultValue))}}class dy extends ot.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function py(t=gy){return e=>e.lift(new yy(t))}class yy{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new my(t,this.errorFactory))}}class my extends ot.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(qp){t=qp}this.destination.error(t)}}}function gy(){return new oy}var vy=n(3392);function by(t,e){return e?Qp(()=>t,e):Qp(()=>t)}var wy=n(4187);const _y=new r.OlP("angularfire2.auth.use-emulator"),Ey=new r.OlP("angularfire2.auth.settings"),Ty=new r.OlP("angularfire2.auth.tenant-id"),Iy=new r.OlP("angularfire2.auth.langugage-code"),Sy=new r.OlP("angularfire2.auth.use-device-language"),Cy=new r.OlP("angularfire.auth.persistence");let Ay=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new vt.HU(i),f=(0,vt.ss)(h),d=new Kp.xQ,p=(0,tt.of)(void 0).pipe((0,gt.QV)(h.outsideAngular),Qp(()=>i.runOutsideAngular(()=>n.e(420).then(n.bind(n,7420)))),(0,W.U)(()=>(0,vt.on)(t,i,e)),(0,W.U)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return(0,vt.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());if(e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n)for(const[t,e]of Object.entries(n))r.settings[t]=e;return l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),iy({bufferSize:1,refCount:!1}));if(v(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,tt.of)(null);else{p.pipe(function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?pt((e,n)=>t(e,n,r)):vy.y,uy(1),n?hy(e):py(()=>new oy))}()).subscribe();const t=p.pipe(Qp(t=>t.getRedirectResult().then(t=>t,()=>null)),f,iy({bufferSize:1,refCount:!1})),e=t=>new Y.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Qp(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Qp(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(by(n),(0,wy.R)(h.outsideAngular),(0,gt.QV)(h.insideAngular)),this.user=t.pipe(by(r),(0,wy.R)(h.outsideAngular),(0,gt.QV)(h.insideAngular)),this.idToken=this.user.pipe(Qp(t=>t?(0,X.D)(t.getIdToken()):(0,tt.of)(null))),this.idTokenResult=this.user.pipe(Qp(t=>t?(0,X.D)(t.getIdTokenResult()):(0,tt.of)(null))),this.credential=(0,Zp.T)(t,d,this.authState.pipe(pt(t=>!t))).pipe((0,W.U)(t=>(null==t?void 0:t.user)?t:null),(0,wy.R)(h.outsideAngular),(0,gt.QV)(h.insideAngular))}return(0,vt.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vt.Dh),r.LFG(vt.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(_y,8),r.LFG(Ey,8),r.LFG(Ty,8),r.LFG(Iy,8),r.LFG(Sy,8),r.LFG(Cy,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(vt.Dh),r.LFG(vt.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(_y,8),r.LFG(Ey,8),r.LFG(Ty,8),r.LFG(Iy,8),r.LFG(Sy,8),r.LFG(Cy,8))},token:t,providedIn:"any"}),t})();function xy(t,e){return function(t,e=$.z){return new Y.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function ky(t,e){return xy(t,e).pipe((0,W.U)(t=>({payload:t,type:"query"})))}function Dy(t,e){return ky(t,e).pipe(it(void 0),st(),(0,W.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function Ny(t,e,n){return Dy(t,n).pipe(ct((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Oy(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Oy(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Oy(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new ft(void 0,void 0)),(0,W.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function Oy(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Ry(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(0,vt.GT)(Ay,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class Py{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Dy(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,W.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(it(void 0),st(),pt(([t,e])=>e.length>0||!t),(0,W.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ct((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Ry(t);return Ny(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ky(this.query,this.afs.schedulers.outsideAngular).pipe((0,W.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,X.D)(this.query.get(t)).pipe((0,gt.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Vy(this.ref.doc(t),this.afs)}}class Vy{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=qy(n,e);return new Py(r,i,this.afs)}snapshotChanges(){return xy(this.ref,this.afs.schedulers.outsideAngular).pipe(it(void 0),st(),(0,W.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,W.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,X.D)(this.ref.get(t)).pipe((0,gt.QV)(this.afs.schedulers.insideAngular))}}class Ly{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Dy(this.query,this.afs.schedulers.outsideAngular).pipe((0,W.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),pt(t=>t.length>0),this.afs.keepUnstableUntilFirst):Dy(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(ct((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Ry(t);return Ny(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ky(this.query,this.afs.schedulers.outsideAngular).pipe((0,W.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,X.D)(this.query.get(t)).pipe((0,gt.QV)(this.afs.schedulers.insideAngular))}}const Fy=new r.OlP("angularfire2.enableFirestorePersistence"),My=new r.OlP("angularfire2.firestore.persistenceSettings"),jy=new r.OlP("angularfire2.firestore.settings"),Uy=new r.OlP("angularfire2.firestore.use-emulator");function qy(t,e=(t=>t)){return{query:e(t),ref:t}}let By=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new vt.HU(o),this.keepUnstableUntilFirst=(0,vt.ss)(this.schedulers);const c=(0,vt.on)(t,o,e);!bt.Z.auth&&u&&(0,vt.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,vt.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!v(i)){const e=()=>{try{return(0,X.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(qp){return"undefined"!=typeof console&&console.warn(qp),(0,tt.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,tt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=qy(n,e),o=this.schedulers.ngZone.run(()=>r);return new Py(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Ly(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Vy(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(vt.Dh),r.LFG(vt.xv,8),r.LFG(Fy,8),r.LFG(jy,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(My,8),r.LFG(Uy,8),r.LFG(_y,8))},t.\u0275prov=r.Yz7({factory:function(){return new t(r.LFG(vt.Dh),r.LFG(vt.xv,8),r.LFG(Fy,8),r.LFG(jy,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(My,8),r.LFG(Uy,8),r.LFG(_y,8))},token:t,providedIn:"any"}),t})(),Gy=(()=>{class t{constructor(t){this.afs=t,this.itemsCollection=this.afs.collection("items",t=>t.orderBy("title","asc")),this.items=this.itemsCollection.snapshotChanges().pipe((0,W.U)(t=>t.map(t=>{const e=t.payload.doc.data();return e.id=t.payload.doc.id,e})))}getItems(){return this.items}addItem(t){this.itemsCollection.add(t)}deleteItemCollection(t){this.itemDoc=this.afs.doc(`items/${t.id}`),this.itemDoc.delete()}updateItem(t){this.itemDoc=this.afs.doc(`items/${t.id}`),this.itemDoc.update(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(By))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();var Hy=n(8470),zy=n(2056);function Ky(t,e){return new Y.y(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=(0,X.D)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}let Zy=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t}),t})(),Jy=(()=>{class t extends Zy{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();const Qy=new r.OlP("NgValueAccessor"),Wy={provide:Qy,useExisting:(0,r.Gpc)(()=>Yy),multi:!0},$y=new r.OlP("CompositionEventMode");let Yy=(()=>{class t extends Zy{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36($y,8))},t.\u0275dir=r.lG2({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.NdJ("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r._Bn([Wy]),r.qOj]}),t})();const Xy=new r.OlP("NgValidators"),tm=new r.OlP("NgAsyncValidators");function em(t){return null!=t}function nm(t){const e=(0,r.QGY)(t)?(0,X.D)(t):t;return(0,r.CqO)(e),e}function rm(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function im(t,e){return e.map(e=>e(t))}function om(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function sm(t){return null!=t?function(t){if(!t)return null;const e=t.filter(em);return 0==e.length?null:function(t){return rm(im(t,e))}}(om(t)):null}function am(t){return null!=t?function(t){if(!t)return null;const e=t.filter(em);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if((0,Hy.k)(e))return Ky(e,null);if((0,zy.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Ky(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Ky(t=1===t.length&&(0,Hy.k)(t[0])?t[0]:t,null).pipe((0,W.U)(t=>e(...t)))}return Ky(t,null)}(im(t,e).map(nm)).pipe((0,W.U)(rm))}}(om(t)):null}function um(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}let cm=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=sm(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=am(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t}),t})(),lm=(()=>{class t extends cm{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=r.n5z(t)))(n||t)}}(),t.\u0275dir=r.lG2({type:t,features:[r.qOj]}),t})();class hm extends cm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class fm{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let dm=(()=>{class t extends fm{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(hm,2))},t.\u0275dir=r.lG2({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})(),pm=(()=>{class t extends fm{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lm,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.ekj("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.qOj]}),t})();function ym(t,e){gm(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&vm(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&vm(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function mm(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function gm(t,e){const n=function(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(um(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(um(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();mm(e._rawValidators,i),mm(e._rawAsyncValidators,i)}function vm(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function bm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const wm="VALID",_m="INVALID",Em="PENDING",Tm="DISABLED";function Im(t){return(xm(t)?t.validators:t)||null}function Sm(t){return Array.isArray(t)?sm(t):t||null}function Cm(t,e){return(xm(e)?e.asyncValidators:t)||null}function Am(t){return Array.isArray(t)?am(t):t||null}function xm(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class km{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Sm(this._rawValidators),this._composedAsyncValidatorFn=Am(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===wm}get invalid(){return this.status===_m}get pending(){return this.status==Em}get disabled(){return this.status===Tm}get enabled(){return this.status!==Tm}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Sm(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Am(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Em,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Tm,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=wm,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==wm&&this.status!==Em||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Tm:wm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Em,this._hasOwnPendingAsyncValidator=!0;const e=nm(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Nm?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Om&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?Tm:this.errors?_m:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Em)?Em:this._anyControlsHaveStatus(_m)?_m:wm}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){xm(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Dm extends km{constructor(t=null,e,n){super(Im(e),Cm(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){bm(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){bm(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Nm extends km{constructor(t,e,n){super(Im(e),Cm(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Dm?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Om extends km{constructor(t,e,n){super(Im(e),Cm(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Dm?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Rm={provide:lm,useExisting:(0,r.Gpc)(()=>Vm)},Pm=(()=>Promise.resolve(null))();let Vm=(()=>{class t extends lm{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.vpe,this.form=new Nm({},sm(t),am(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Pm.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),ym(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Pm.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),bm(this._directives,t)})}addFormGroup(t){Pm.then(()=>{const e=this._findContainer(t.path),n=new Nm({});(function(t,e){gm(t,e)})(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Pm.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Pm.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,e=this._directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Xy,10),r.Y36(tm,10))},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.NdJ("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([Rm]),r.qOj]}),t})();const Lm={provide:hm,useExisting:(0,r.Gpc)(()=>Mm)},Fm=(()=>Promise.resolve(null))();let Mm=(()=>{class t extends hm{constructor(t,e,n,i){super(),this.control=new Dm,this._registered=!1,this.update=new r.vpe,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Yy?n=t:Object.getPrototypeOf(t.constructor)===Jy?r=t:i=t}),i||r||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ym(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Fm.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Fm.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lm,9),r.Y36(Xy,10),r.Y36(tm,10),r.Y36(Qy,10))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([Lm]),r.qOj,r.TTD]}),t})(),jm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.lG2({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Um=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})(),qm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[Um]]}),t})(),Bm=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[qm]}),t})(),Gm=(()=>{class t{constructor(t){this.itemService=t,this.item={title:"",description:""}}ngOnInit(){}onSubmit(){""!==this.item.title&&""!==this.item.description&&(this.itemService.addItem(this.item),this.item.title="",this.item.description="")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Gy))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-add-item"]],decls:15,vars:2,consts:[[1,"card"],[1,"card-content"],[1,"card-title"],[1,"col","s6",3,"ngSubmit"],[1,"row"],[1,"input-field","col","s6"],["type","text","placeholder","add title","name","title",3,"ngModel","ngModelChange"],["type","text","placeholder","add description","name","title",3,"ngModel","ngModelChange"],["type","submit","value","Submit",1,"btn"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"span",2),r._uU(3,"Add Item"),r.qZA(),r.TgZ(4,"form",3),r.NdJ("ngSubmit",function(){return e.onSubmit()}),r.TgZ(5,"div",4),r.TgZ(6,"div",5),r.TgZ(7,"input",6),r.NdJ("ngModelChange",function(t){return e.item.title=t}),r.qZA(),r.TgZ(8,"label"),r._uU(9,"Title"),r.qZA(),r.qZA(),r.TgZ(10,"div",5),r.TgZ(11,"input",7),r.NdJ("ngModelChange",function(t){return e.item.description=t}),r.qZA(),r.TgZ(12,"label"),r._uU(13,"Description"),r.qZA(),r.qZA(),r._UZ(14,"input",8),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&t&&(r.xp6(7),r.Q6J("ngModel",e.item.title),r.xp6(4),r.Q6J("ngModel",e.item.description))},directives:[jm,pm,Vm,Yy,dm,Mm],styles:[""]}),t})();function Hm(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"i",9),r.NdJ("click",function(){return r.CHM(t),r.oxw(3).clearState()}),r.qZA()}}function zm(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"form",10),r.NdJ("ngSubmit",function(){r.CHM(t);const e=r.oxw().$implicit;return r.oxw(2).updateItem(e)}),r.TgZ(2,"div",11),r.TgZ(3,"div",12),r.TgZ(4,"input",13),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().$implicit.title=e}),r.qZA(),r.qZA(),r.TgZ(5,"div",12),r.TgZ(6,"input",14),r.NdJ("ngModelChange",function(e){return r.CHM(t),r.oxw().$implicit.description=e}),r.qZA(),r.qZA(),r._UZ(7,"input",15),r.TgZ(8,"button",16),r.NdJ("click",function(e){r.CHM(t);const n=r.oxw().$implicit;return r.oxw(2).deleteItem(e,n)}),r._uU(9,"delete item"),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=r.oxw().$implicit;r.xp6(4),r.Q6J("ngModel",t.title),r.xp6(2),r.Q6J("ngModel",t.description)}}function Km(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"ul",3),r.TgZ(1,"li",4),r.NdJ("dblclick",function(e){const n=r.CHM(t).$implicit;return r.oxw(2).deleteItem(e,n)}),r.TgZ(2,"strong"),r._uU(3),r.qZA(),r._uU(4),r.TgZ(5,"a",5),r.TgZ(6,"i",6),r.NdJ("click",function(e){const n=r.CHM(t).$implicit;return r.oxw(2).editItem(e,n)}),r.qZA(),r.YNc(7,Hm,1,0,"i",7),r.qZA(),r.YNc(8,zm,10,2,"div",8),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit,n=r.oxw(2);r.xp6(3),r.hij("",t.title,": "),r.xp6(1),r.hij("",t.description," "),r.xp6(3),r.Q6J("ngIf",n.editState&&n.itemToEdit.id==t.id),r.xp6(1),r.Q6J("ngIf",n.editState&&n.itemToEdit.id==t.id)}}function Zm(t,e){if(1&t&&(r.TgZ(0,"div"),r.YNc(1,Km,9,4,"ul",2),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.items)}}function Jm(t,e){1&t&&(r._UZ(0,"hr"),r.TgZ(1,"h5"),r._uU(2,"No items in the list"),r.qZA())}let Qm=(()=>{class t{constructor(t){this.itemService=t,this.editState=!1}ngOnInit(){this.itemService.getItems().subscribe(t=>{this.items=t})}deleteItem(t,e){this.clearState(),this.itemService.deleteItemCollection(e)}editItem(t,e){this.editState=!0,this.itemToEdit=e}updateItem(t){this.itemService.updateItem(t),this.clearState()}clearState(){this.editState=!1,this.itemToEdit=null}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Gy))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-items"]],decls:3,vars:1,consts:[[4,"ngIfNoItems","ngIf"],["noItems",""],["class","collection",4,"ngFor","ngForOf"],[1,"collection"],[1,"collection-item",3,"dblclick"],[1,"secondary-content"],[1,"fa","fa-pencil",3,"click"],["class","fa fa-compress",3,"click",4,"ngIf"],[4,"ngIf"],[1,"fa","fa-compress",3,"click"],[3,"ngSubmit"],[1,"row"],[1,"input-field","col","s6"],["type","text","placeholder","add title","name","title",3,"ngModel","ngModelChange"],["type","text","placeholder","add description","name","title",3,"ngModel","ngModelChange"],["type","submit","value","Update Item",1,"btn","orange"],[1,"btn","red",3,"click"]],template:function(t,e){1&t&&(r.YNc(0,Zm,2,1,"div",0),r.YNc(1,Jm,3,0,"ng-template",null,1,r.W1O)),2&t&&r.Q6J("ngIf",(null==e.items?null:e.items.length)>0)},directives:[p,f,jm,pm,Vm,Yy,dm,Mm],styles:[""]}),t})(),Wm=(()=>{class t{constructor(){this.title="productFireStore"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"]],template:function(t,e){1&t&&(r._UZ(0,"app-navbar"),r.TgZ(1,"div",0),r._UZ(2,"app-add-item"),r._UZ(3,"app-items"),r.qZA())},directives:[Q,Gm,Qm],styles:[""]}),t})();const $m={apiKey:"AIzaSyAfukflhk2eytp-XDHB0rkbvDexSM_Jaag",authDomain:"productproject-fdbf4.firebaseapp.com",projectId:"productproject-fdbf4",storageBucket:"productproject-fdbf4.appspot.com",messagingSenderId:"912985997478",appId:"1:912985997478:web:f78d5a4c5e97516387f467"};let Ym=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[Wm]}),t.\u0275inj=r.cJS({providers:[Gy],imports:[[J,vt.hO.initializeApp($m),vt.hO,Bm]]}),t})();(0,r.G48)(),K().bootstrapModule(Ym).catch(t=>console.error(t))},4762:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}}},t=>{"use strict";t(t.s=4508)}]);